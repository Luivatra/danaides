"""test1

Revision ID: 82025964e8a2
Revises: c49f2075bc5b
Create Date: 2022-10-16 10:54:09.099156

"""
from alembic import op
import sqlalchemy as sa
from alembic_utils.pg_extension import PGExtension
from sqlalchemy import text as sql_text
from alembic_utils.pg_grant_table import PGGrantTable
from sqlalchemy import text as sql_text
from alembic_utils.pg_materialized_view import PGMaterializedView
from sqlalchemy import text as sql_text
from alembic_utils.pg_view import PGView
from sqlalchemy import text as sql_text
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision = '82025964e8a2'
down_revision = 'c49f2075bc5b'
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('audit_log')
    op.drop_index('ix_checkpoint_tokens_index', table_name='checkpoint_tokens')
    op.drop_table('checkpoint_tokens')
    op.drop_index('ix_checkpoint_boxes_index', table_name='checkpoint_boxes')
    op.drop_table('checkpoint_boxes')
    op.drop_index('uq_tokens', table_name='tokens')
    op.drop_table('tokens')
    op.drop_table('prices')
    op.drop_index('ix_checkpoint_utxos_index', table_name='checkpoint_utxos')
    op.drop_table('checkpoint_utxos')
    op.drop_table('boxes')
    op.drop_index('idx_utxos', table_name='utxos')
    op.drop_index('uq_utxos_boxid', table_name='utxos')
    op.drop_table('utxos')
    public_v_audit_stats = PGView(
        schema="public",
        signature="v_audit_stats",
        definition='WITH ss AS (\n         SELECT audit_log.created_at,\n            lag(audit_log.created_at) OVER (ORDER BY audit_log.created_at) AS prev,\n            audit_log.height,\n            audit_log.service\n           FROM audit_log\n        )\n SELECT max(ss.height) AS max_height,\n    avg((ss.created_at - ss.prev)) AS avg_block,\n    count(*) AS block_count,\n    ss.service\n   FROM ss\n  WHERE (ss.created_at IS NOT NULL)\n  GROUP BY ss.service'
    )
    op.drop_entity(public_v_audit_stats)

    public_v_token_config = PGView(
        schema="public",
        signature="v_token_config",
        definition="SELECT 'paideia'::text AS token_name,\n    '1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489'::text AS token_id,\n    '245957934c20285ada547aa8f2c8e6f7637be86a1985b3e4c36e4e1ad8ce97ab'::text AS proxy_address,\n    '101f040004000e2012bbef36eaa5e61b64d519196a1e8ebea360f18aba9b02d2a21b16f26208960f040204000400040001000e20b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f0910402040004000402040204000400050204020402040604000100040404020402010001010100040201000100d807d601b2a4730000d6028cb2db6308720173010001d6039372027302d604e4c6a70411d605e4c6a7050ed60695ef7203ed93c5b2a4730300c5a78fb2e4c6b2a57304000411730500b2e4c6720104117306007307d6079372027308d1ecec957203d80ad608b2a5dc0c1aa402a7730900d609e4c672080411d60adb63087208d60bb2720a730a00d60cdb6308a7d60db2720c730b00d60eb2720a730c00d60fb2720c730d00d6107e8c720f0206d611e4c6720104119683090193c17208c1a793c27208c2a793b27209730e009ab27204730f00731093e4c67208050e720593b27209731100b27204731200938c720b018c720d01938c720b028c720d02938c720e018c720f01937e8c720e02069a72109d9c7eb272117313000672107eb27211731400067315957206d801d608b2a5731600ed72079593c27208c2a7d801d609c67208050e95e67209ed93e472097205938cb2db6308b2a57317007318000172057319731a731b9595efec7206720393c5b2a4731c00c5a7731d7207731e'::text AS stake_tree"
    )
    op.drop_entity(public_v_token_config)

    public_v_assets = PGView(
        schema="public",
        signature="v_assets",
        definition="WITH a AS (\n         SELECT utxos.address,\n            ((each(utxos.assets)).key)::character varying(64) AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount\n           FROM utxos\n          WHERE ((utxos.address)::text <> ''::text)\n        )\n SELECT a.address,\n    a.token_id,\n    sum(a.amount) AS amount\n   FROM a\n  GROUP BY a.address, a.token_id"
    )
    op.drop_entity(public_v_assets)

    public_v_balances = PGView(
        schema="public",
        signature="v_balances",
        definition="SELECT utxos.address,\n    sum(utxos.nergs) AS nergs\n   FROM utxos\n  WHERE ((utxos.address)::text <> ''::text)\n  GROUP BY utxos.address"
    )
    op.drop_entity(public_v_balances)

    public_v_registers_by_token = PGView(
        schema="public",
        signature="v_registers_by_token",
        definition='WITH ep AS (\n         SELECT utxos.box_id,\n            skeys(utxos.assets) AS token_id\n           FROM utxos\n        )\n SELECT u.box_id,\n    ep.token_id,\n    (u.assets -> ep.token_id) AS amount,\n    hstore_to_json(u.registers) AS registers\n   FROM (utxos u\n     JOIN ep ON (((ep.box_id)::text = (u.box_id)::text)))'
    )
    op.drop_entity(public_v_registers_by_token)

    public_v_staking = PGView(
        schema="public",
        signature="v_staking",
        definition="WITH ergopad AS (\n         SELECT 'ergopad'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text))::bigint AS amount,\n            ((u.assets -> '1028de73d018f0c9a374b71555c5b8f1390994f2f41633e7b9d68f77735782ee'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text)))\n          WHERE (u.ergo_tree = '1017040004000e200549ea3374a36b7a22a803766af732e61798463c3332c5f6d86c8ab9195eed59040204000400040204020400040005020402040204060400040204040e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402010001010100d802d601b2a4730000d6028cb2db6308720173010001959372027302d80bd603b2a5dc0c1aa402a7730300d604e4c672030411d605e4c6a70411d606db63087203d607b27206730400d608db6308a7d609b27208730500d60ab27206730600d60bb27208730700d60c8c720b02d60de4c672010411d19683090193c17203c1a793c27203c2a793b272047308009ab27205730900730a93e4c67203050ee4c6a7050e93b27204730b00b27205730c00938c7207018c720901938c7207028c720902938c720a018c720b01938c720a029a720c9d9cb2720d730d00720cb2720d730e00d801d603b2a4730f009593c57203c5a7d801d604b2a5731000d1ed93720273119593c27204c2a7d801d605c67204050e95e67205ed93e47205e4c6a7050e938cb2db6308b2a573120073130001e4c67203050e73147315d17316'::text)\n        ), paideia AS (\n         SELECT 'paideia'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489'::text))::bigint AS amount,\n            ((u.assets -> '245957934c20285ada547aa8f2c8e6f7637be86a1985b3e4c36e4e1ad8ce97ab'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489'::text)))\n          WHERE (u.ergo_tree = '101f040004000e2012bbef36eaa5e61b64d519196a1e8ebea360f18aba9b02d2a21b16f26208960f040204000400040001000e20b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f0910402040004000402040204000400050204020402040604000100040404020402010001010100040201000100d807d601b2a4730000d6028cb2db6308720173010001d6039372027302d604e4c6a70411d605e4c6a7050ed60695ef7203ed93c5b2a4730300c5a78fb2e4c6b2a57304000411730500b2e4c6720104117306007307d6079372027308d1ecec957203d80ad608b2a5dc0c1aa402a7730900d609e4c672080411d60adb63087208d60bb2720a730a00d60cdb6308a7d60db2720c730b00d60eb2720a730c00d60fb2720c730d00d6107e8c720f0206d611e4c6720104119683090193c17208c1a793c27208c2a793b27209730e009ab27204730f00731093e4c67208050e720593b27209731100b27204731200938c720b018c720d01938c720b028c720d02938c720e018c720f01937e8c720e02069a72109d9c7eb272117313000672107eb27211731400067315957206d801d608b2a5731600ed72079593c27208c2a7d801d609c67208050e95e67209ed93e472097205938cb2db6308b2a57317007318000172057319731a731b9595efec7206720393c5b2a4731c00c5a7731d7207731e'::text)\n        ), egio AS (\n         SELECT 'egio'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text))::bigint AS amount,\n            ((u.assets -> '012d649686deeef606d253146bec0cf623f9b84574fbfa0fd0d1091393923613'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text)))\n          WHERE (u.ergo_tree = '1017040004000e20a8d633dee705ff90e3181013381455353dac2d91366952209ac6b3f9cdcc23e9040204000400040204020400040005020402040204060400040204040e20f419099a27aaa5f6f7d109d8773b1862e8d1857b44aa7d86395940d41eb5380604020402010001010100d802d601b2a4730000d6028cb2db6308720173010001959372027302d80bd603b2a5dc0c1aa402a7730300d604e4c672030411d605e4c6a70411d606db63087203d607b27206730400d608db6308a7d609b27208730500d60ab27206730600d60bb27208730700d60c8c720b02d60de4c672010411d19683090193c17203c1a793c27203c2a793b272047308009ab27205730900730a93e4c67203050ee4c6a7050e93b27204730b00b27205730c00938c7207018c720901938c7207028c720902938c720a018c720b01938c720a029a720c9d9cb2720d730d00720cb2720d730e00d801d603b2a4730f009593c57203c5a7d801d604b2a5731000d1ed93720273119593c27204c2a7d801d605c67204050e95e67205ed93e47205e4c6a7050e938cb2db6308b2a573120073130001e4c67203050e73147315d17316'::text)\n        ), egiov2 AS (\n         SELECT 'egiov2'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text))::bigint AS amount,\n            ((u.assets -> '012d649686deeef606d253146bec0cf623f9b84574fbfa0fd0d1091393923613'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text)))\n          WHERE (u.ergo_tree = '101b0400040004020e20097fd281c99588269d672e1b686bf6bcdce04102e183b2242f6634d93869fc0a04020e200e4202196f6030ab1986e39012dc95ea10f034b13d90a70c0b1f86d986106ff6040204000400040204000400050204020402040604000100040004000400040401000402040201010100d809d601b2a4730000d6028cb2db6308720173010001d603e4c6a70411d604e4c6a7050ed605db6308a7d606b27205730200d6077e8c72060206d6089372027303d60993c5b2a4730400c5a7d1ecec959372027305d807d60ab2a5dc0c1aa402a7730600d60be4c6720a0411d60cdb6308720ad60db2720c730700d60eb27205730800d60fb2720c730900d610e4c6720104119683090193c1720ac1a793c2720ac2a793b2720b730a009ab27203730b00730c93b2720b730d00b27203730e0093e4c6720a050e7204938c720d018c720e01938c720d028c720e02938c720f018c720601937e8c720f02069a72079d9c7eb27210730f000672077eb272107310000673119596830301720872098fb2e4c6b2a57312000411731300b2e4c672010411731400d801d60ab2a57315009593c2720ac2a7d801d60bc6720a050e9683020195e6720b93e4720b72047316938cb2db6308b2a57317007318000172047319731a9683020172087209'::text)\n        ), neta AS (\n         SELECT 'neta'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8'::text))::bigint AS amount,\n            ((u.assets -> 'a94787d05eefbd1b773b62812123b91c40553bd5ed7f3092ae66dba3f812e0c0'::text))::bigint AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id,\n            u.assets\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8'::text)))\n          WHERE (u.ergo_tree = '101b0400040004020e209e5e5e0a3abbaeaf0e54e1e2ca4a6a96c9b7151dd6d7ddaf738be2f99a54dc2b04020e203f38af5d8ce0549390feb2e1a0cd614c865d7578425683bcdb0101630e1a66d4040204000400040204000400050204020402040604000100040004000400040401000402040201010100d809d601b2a4730000d6028cb2db6308720173010001d603e4c6a70411d604e4c6a7050ed605db6308a7d606b27205730200d6077e8c72060206d6089372027303d60993c5b2a4730400c5a7d1ecec959372027305d807d60ab2a5dc0c1aa402a7730600d60be4c6720a0411d60cdb6308720ad60db2720c730700d60eb27205730800d60fb2720c730900d610e4c6720104119683090193c1720ac1a793c2720ac2a793b2720b730a009ab27203730b00730c93b2720b730d00b27203730e0093e4c6720a050e7204938c720d018c720e01938c720d028c720e02938c720f018c720601937e8c720f02069a72079d9c7eb27210730f000672077eb272107310000673119596830301720872098fb2e4c6b2a57312000411731300b2e4c672010411731400d801d60ab2a57315009593c2720ac2a7d801d60bc6720a050e9683020195e6720b93e4720b72047316938cb2db6308b2a57317007318000172047319731a9683020172087209'::text)\n        ), a AS (\n         SELECT utxos.address,\n            utxos.id,\n            ((each(utxos.assets)).key)::character varying(64) AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount\n           FROM utxos\n        )\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (ergopad u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (paideia u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (egio u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (egiov2 u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (neta u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)"
    )
    op.drop_entity(public_v_staking)

    public_v_token_locked = PGView(
        schema="public",
        signature="v_token_locked",
        definition="WITH adr AS (\n         SELECT u_1.address,\n            u_1.id,\n            ((each(u_1.assets)).key)::character varying(64) AS token_id,\n            ((each(u_1.assets)).value)::bigint AS amount\n           FROM utxos u_1\n          WHERE ((u_1.address)::text <> ''::text)\n        )\n SELECT adr.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty\n   FROM (v_token_staked u\n     JOIN adr ON (((adr.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)"
    )
    op.drop_entity(public_v_token_locked)

    public_v_token_status = PGView(
        schema="public",
        signature="v_token_status",
        definition="WITH paideia_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? 'b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f091'::text)\n         LIMIT 1\n        ), paideia_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '93cda90b4fe24f075d7961fa0d1d662fdc7e1349d313059b9618eecb16c5eade'::text)\n         LIMIT 1\n        ), ergopad_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '05cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f3125'::text)\n         LIMIT 1\n        ), ergopad_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '0d01f2f0b3254b4a1731e1b61ad77641fe54de2bd68d1c6fc1ae4e7e9ddfb212'::text)\n         LIMIT 1\n        ), egio_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? 'f419099a27aaa5f6f7d109d8773b1862e8d1857b44aa7d86395940d41eb53806'::text)\n         LIMIT 1\n        ), egio_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '07a8648d0de0f7c87aad41a1fbc6d393a6ad95584d38c47c88125bef101c29e9'::text)\n         LIMIT 1\n        ), egiov2_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '097fd281c99588269d672e1b686bf6bcdce04102e183b2242f6634d93869fc0a'::text)\n         LIMIT 1\n        ), egiov2_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? 'dc22db903e5ac54da5d4b6f33dd13b2330b79a9ae473f9dd3ea0d796c1179443'::text)\n         LIMIT 1\n        ), neta_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '9e5e5e0a3abbaeaf0e54e1e2ca4a6a96c9b7151dd6d7ddaf738be2f99a54dc2b'::text)\n         LIMIT 1\n        ), neta_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '8a4f19b27efeaa328e9ba03f0752253713e6b477cdb9ea7d5e8857e671c48e60'::text)\n         LIMIT 1\n        )\n SELECT 'paideia'::text AS token_name,\n    paideia_st.r4 AS str4,\n    paideia_pl.r4 AS plr4,\n    4 AS dcml\n   FROM paideia_st,\n    paideia_pl\nUNION\n SELECT 'ergopad'::text AS token_name,\n    ergopad_st.r4 AS str4,\n    ergopad_pl.r4 AS plr4,\n    2 AS dcml\n   FROM ergopad_st,\n    ergopad_pl\nUNION\n SELECT 'egio'::text AS token_name,\n    egio_st.r4 AS str4,\n    egio_pl.r4 AS plr4,\n    4 AS dcml\n   FROM egio_st,\n    egio_pl\nUNION\n SELECT 'egiov2'::text AS token_name,\n    egiov2_st.r4 AS str4,\n    egiov2_pl.r4 AS plr4,\n    4 AS dcml\n   FROM egiov2_st,\n    egiov2_pl\nUNION\n SELECT 'neta'::text AS token_name,\n    neta_st.r4 AS str4,\n    neta_pl.r4 AS plr4,\n    6 AS dcml\n   FROM neta_st,\n    neta_pl"
    )
    op.drop_entity(public_v_token_status)

    public_v_token_staked = PGView(
        schema="public",
        signature="v_token_staked",
        definition="SELECT u.box_id,\n    u.height,\n    ((u.assets -> tid.token_id))::bigint AS amount,\n    ((u.assets -> tid.proxy_address))::integer AS proxy,\n    (u.registers -> 'R4'::text) AS penalty,\n    regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n    t.decimals,\n    t.token_id\n   FROM ((utxos u\n     JOIN v_token_config tid ON ((tid.stake_tree = u.ergo_tree)))\n     JOIN tokens t ON (((t.token_id)::text = tid.token_id)))"
    )
    op.drop_entity(public_v_token_staked)

    public_v_tokenomics_ergopad = PGView(
        schema="public",
        signature="v_tokenomics_ergopad",
        definition="WITH assets AS (\n         SELECT (each(utxos.assets)).key AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount,\n            utxos.ergo_tree\n           FROM utxos\n        ), vested AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.ergo_tree = '10070400040204000500040004000400d80bd601e4c6a7040ed602b2db6308a7730000d6038c720201d604e4c6a70805d605e4c6a70705d606e4c6a70505d607e4c6a70605d6089c9d99db6903db6503fe720572067207d6098c720202d60a9972047209d60b958f99720472087207997204720a997208720ad1ed93b0b5a5d9010c63ededed93c2720c720193e4c6720c040ee4c6a7090e93b1db6308720c7301938cb2db6308720c7302000172037303d9010c41639a8c720c018cb2db63088c720c0273040002720bec937209720baea5d9010c63ededededededededed93c1720cc1a793c2720cc2a7938cb2db6308720c730500017203938cb2db6308720c73060002997209720b93e4c6720c040e720193e4c6720c0505720693e4c6720c0605720793e4c6720c0705720593e4c6720c0805720493e4c6720c090ee4c6a7090e'::text)\n        ), emitted AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.ergo_tree = '102d04000e20d71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de41304000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504040404040604020400040204040402050004020400040004020402040404040400040004000402040004000e201028de73d018f0c9a374b71555c5b8f1390994f2f41633e7b9d68f77735782ee040004020100040604000500040204000400040204020400040204020404040404060100d802d601b2a4730000d602730195ed938cb2db6308720173020001730393c5b2a4730400c5a7d80ad603b2a5730500d604e4c672030411d605e4c672010411d606b27204730600d607b2a4730700d608b2e4c672070411730800d609db6308a7d60a9a8cb2db63087207730900029592b17209730a8cb27209730b0002730cd60bdb63087203d60cb2720b730d00d19683080193c27203c2a793b27204730e00b27205730f0093b27204731000b2720573110093b27204731200b27205731300937206958f7208720a7208720a938cb2720b731400018cb2720973150001938c720c017202938c720c0272069593c57201c5a7d80ad603b2a5731600d604db63087203d605db6308a7d6068cb2720573170002d607b5a4d9010763d801d609db630872079591b172097318ed938cb2720973190001731a93b2e4c672070411731b00b2e4c6a70411731c00731dd608e4c6a70411d609b27208731e00d60ab27208731f00d60bb072077320d9010b41639a8c720b019d9c8cb2db63088c720b02732100027209720ad60ce4c672030411d19683070193c27203c2a7938cb27204732200018cb272057323000195907206720b93b172047324d801d60db27204732500ed938c720d017202928c720d02997206720b93b2720c732600720a93b2720c732700b2720873280093b2720c73290099b27208732a007eb172070593b2720c732b007209d1732c'::text)\n        ), staked AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = '1017040004000e200549ea3374a36b7a22a803766af732e61798463c3332c5f6d86c8ab9195eed59040204000400040204020400040005020402040204060400040204040e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402010001010100d802d601b2a4730000d6028cb2db6308720173010001959372027302d80bd603b2a5dc0c1aa402a7730300d604e4c672030411d605e4c6a70411d606db63087203d607b27206730400d608db6308a7d609b27208730500d60ab27206730600d60bb27208730700d60c8c720b02d60de4c672010411d19683090193c17203c1a793c27203c2a793b272047308009ab27205730900730a93e4c67203050ee4c6a7050e93b27204730b00b27205730c00938c7207018c720901938c7207028c720902938c720a018c720b01938c720a029a720c9d9cb2720d730d00720cb2720d730e00d801d603b2a4730f009593c57203c5a7d801d604b2a5731000d1ed93720273119593c27204c2a7d801d605c67204050e95e67205ed93e47205e4c6a7050e938cb2db6308b2a573120073130001e4c67203050e73147315d17316'::text) AND (assets.token_id = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text))\n        ), stake_pool AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = '1014040004000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402040204040404040205000400040004000402040204000400040004000100d801d601b2a473000095ed938cb2db6308720173010001730293c5b2a4730300c5a7d808d602b2a5730400d603db63087202d604db6308a7d605b27204730500d606db6308b2a4730600d6079592b1720673078cb27206730800027309d6089a8c7205027207d609b2e4c6a70411730a00d19683050193c27202c2a7938cb27203730b00018cb27204730c0001959172087209d801d60ab27203730d00ed938c720a018c720501938c720a02997208720993b17203730e93b2e4c672020411730f00720993b2e4c6b2a57310000411731100999ab2e4c67201041173120072097207d17313'::text) AND (assets.token_id = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text))\n        ), supply AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.token_id = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text)\n          GROUP BY assets.token_id\n        ), vals AS (\n         SELECT ( SELECT vested.amount\n                   FROM vested) AS vested,\n            ( SELECT staked.amount\n                   FROM staked) AS staked,\n            ( SELECT emitted.amount\n                   FROM emitted) AS emitted,\n            ( SELECT stake_pool.amount\n                   FROM stake_pool) AS stake_pool,\n            ( SELECT supply.amount\n                   FROM supply) AS supply\n        )\n SELECT 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text AS token_id,\n    t.decimals,\n    t.token_price,\n    COALESCE(v.vested, 0.0) AS vested,\n    v.staked,\n    v.emitted,\n    v.stake_pool,\n    v.supply,\n    (((v.supply - COALESCE(v.vested, 0.0)) - v.emitted) - v.stake_pool) AS in_circulation,\n    (((COALESCE(v.vested, 0.0))::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS vested_actual,\n    (((v.staked)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS staked_actual,\n    (((v.emitted)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS emitted_actual,\n    (((v.stake_pool)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS stake_pool_actual,\n    (((v.supply)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS supply_actual,\n    (((((v.supply - COALESCE(v.vested, 0.0)) - v.emitted) - v.stake_pool) / (t.decimals)::numeric))::numeric(32,2) AS in_circulation_actual\n   FROM (vals v\n     JOIN tokens t ON (((t.token_id)::text = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text)))"
    )
    op.drop_entity(public_v_tokenomics_ergopad)

    public_v_tokenomics_neta = PGView(
        schema="public",
        signature="v_tokenomics_neta",
        definition='WITH assets AS (\n         SELECT (each(utxos.assets)).key AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount,\n            utxos.ergo_tree\n           FROM utxos\n        ), vested AS (\n         SELECT 0 AS amount\n        ), emitted AS (\n         SELECT 0 AS amount\n        ), staked AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'101b0400040004020e209e5e5e0a3abbaeaf0e54e1e2ca4a6a96c9b7151dd6d7ddaf738be2f99a54dc2b04020e203f38af5d8ce0549390feb2e1a0cd614c865d7578425683bcdb0101630e1a66d4040204000400040204000400050204020402040604000100040004000400040401000402040201010100d809d601b2a4730000d6028cb2db6308720173010001d603e4c6a70411d604e4c6a7050ed605db6308a7d606b27205730200d6077e8c72060206d6089372027303d60993c5b2a4730400c5a7d1ecec959372027305d807d60ab2a5dc0c1aa402a7730600d60be4c6720a0411d60cdb6308720ad60db2720c730700d60eb27205730800d60fb2720c730900d610e4c6720104119683090193c1720ac1a793c2720ac2a793b2720b730a009ab27203730b00730c93b2720b730d00b27203730e0093e4c6720a050e7204938c720d018c720e01938c720d028c720e02938c720f018c720601937e8c720f02069a72079d9c7eb27210730f000672077eb272107310000673119596830301720872098fb2e4c6b2a57312000411731300b2e4c672010411731400d801d60ab2a57315009593c2720ac2a7d801d60bc6720a050e9683020195e6720b93e4720b72047316938cb2db6308b2a57317007318000172047319731a9683020172087209\'::text) AND (assets.token_id = \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text))\n        ), stake_pool AS (\n         SELECT 0 AS amount\n        ), supply AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.token_id = \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text)\n          GROUP BY assets.token_id\n        ), vals AS (\n         SELECT ( SELECT COALESCE(vested.amount, 0) AS "coalesce"\n                   FROM vested) AS vested,\n            ( SELECT COALESCE(staked.amount, (0)::numeric) AS "coalesce"\n                   FROM staked) AS staked,\n            ( SELECT COALESCE(emitted.amount, 0) AS "coalesce"\n                   FROM emitted) AS emitted,\n            ( SELECT COALESCE(stake_pool.amount, 0) AS "coalesce"\n                   FROM stake_pool) AS stake_pool,\n            ( SELECT COALESCE(supply.amount, (0)::numeric) AS "coalesce"\n                   FROM supply) AS supply\n        )\n SELECT \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text AS token_id,\n    t.decimals,\n    t.token_price,\n    v.vested,\n    v.staked,\n    v.emitted,\n    v.stake_pool,\n    v.supply,\n    (((v.supply - (v.vested)::numeric) - (v.emitted)::numeric) - (v.stake_pool)::numeric) AS in_circulation,\n    (((v.vested)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS vested_actual,\n    (((v.staked)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS staked_actual,\n    (((v.emitted)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS emitted_actual,\n    (((v.stake_pool)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS stake_pool_actual,\n    (((v.supply)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS supply_actual,\n    (((((v.supply - (v.vested)::numeric) - (v.emitted)::numeric) - (v.stake_pool)::numeric) / (t.decimals)::numeric))::numeric(32,2) AS in_circulation_actual\n   FROM (vals v\n     JOIN tokens t ON (((t.token_id)::text = \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text)))'
    )
    op.drop_entity(public_v_tokenomics_neta)

    public_v_tokenomics_paideia = PGView(
        schema="public",
        signature="v_tokenomics_paideia",
        definition='WITH assets AS (\n         SELECT (each(utxos.assets)).key AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount,\n            utxos.ergo_tree\n           FROM utxos\n        ), vested AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'100e04020400040404000402040604000402040204000400040404000400d810d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605e4c6a70411d6069d99db6903db6503feb27205730200b27205730300d607b27205730400d608b27205730500d6099972087204d60a9592720672079972087209999d9c7206720872077209d60b937204720ad60c95720bb2a5730600b2a5730700d60ddb6308720cd60eb2720d730800d60f8c720301d610b2a5730900d1eded96830201aedb63087201d901114d0e938c721101720293c5b2a4730a00c5a79683050193c2720cc2720193b1720d730b938cb2720d730c00017202938c720e01720f938c720e02720aec720bd801d611b2db63087210730d009683060193c17210c1a793c27210c2a7938c721101720f938c721102997204720a93e4c67210050e720293e4c6721004117205\'::text) AND (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text))\n        ), emitted AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.ergo_tree = \'102d04000e201fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad48904000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504040404040604020400040204040402050004020400040004020402040404040400040004000402040004000e201028de73d018f0c9a374b71555c5b8f1390994f2f41633e7b9d68f77735782ee040004020100040604000500040204000400040204020400040204020404040404060100d802d601b2a4730000d602730195ed938cb2db6308720173020001730393c5b2a4730400c5a7d80ad603b2a5730500d604e4c672030411d605e4c672010411d606b27204730600d607b2a4730700d608b2e4c672070411730800d609db6308a7d60a9a8cb2db63087207730900029592b17209730a8cb27209730b0002730cd60bdb63087203d60cb2720b730d00d19683080193c27203c2a793b27204730e00b27205730f0093b27204731000b2720573110093b27204731200b27205731300937206958f7208720a7208720a938cb2720b731400018cb2720973150001938c720c017202938c720c0272069593c57201c5a7d80ad603b2a5731600d604db63087203d605db6308a7d6068cb2720573170002d607b5a4d9010763d801d609db630872079591b172097318ed938cb2720973190001731a93b2e4c672070411731b00b2e4c6a70411731c00731dd608e4c6a70411d609b27208731e00d60ab27208731f00d60bb072077320d9010b41639a8c720b019d9c8cb2db63088c720b02732100027209720ad60ce4c672030411d19683070193c27203c2a7938cb27204732200018cb272057323000195907206720b93b172047324d801d60db27204732500ed938c720d017202928c720d02997206720b93b2720c732600720a93b2720c732700b2720873280093b2720c73290099b27208732a007eb172070593b2720c732b007209d1732c\'::text)\n        ), staked AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'101f040004000e2012bbef36eaa5e61b64d519196a1e8ebea360f18aba9b02d2a21b16f26208960f040204000400040001000e20b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f0910402040004000402040204000400050204020402040604000100040404020402010001010100040201000100d807d601b2a4730000d6028cb2db6308720173010001d6039372027302d604e4c6a70411d605e4c6a7050ed60695ef7203ed93c5b2a4730300c5a78fb2e4c6b2a57304000411730500b2e4c6720104117306007307d6079372027308d1ecec957203d80ad608b2a5dc0c1aa402a7730900d609e4c672080411d60adb63087208d60bb2720a730a00d60cdb6308a7d60db2720c730b00d60eb2720a730c00d60fb2720c730d00d6107e8c720f0206d611e4c6720104119683090193c17208c1a793c27208c2a793b27209730e009ab27204730f00731093e4c67208050e720593b27209731100b27204731200938c720b018c720d01938c720b028c720d02938c720e018c720f01937e8c720e02069a72109d9c7eb272117313000672107eb27211731400067315957206d801d608b2a5731600ed72079593c27208c2a7d801d609c67208050e95e67209ed93e472097205938cb2db6308b2a57317007318000172057319731a731b9595efec7206720393c5b2a4731c00c5a7731d7207731e\'::text) AND (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text))\n        ), stake_pool AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'1014040004000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402040204040404040205000400040004000402040204000400040004000100d801d601b2a473000095ed938cb2db6308720173010001730293c5b2a4730300c5a7d808d602b2a5730400d603db63087202d604db6308a7d605b27204730500d606db6308b2a4730600d6079592b1720673078cb27206730800027309d6089a8c7205027207d609b2e4c6a70411730a00d19683050193c27202c2a7938cb27203730b00018cb27204730c0001959172087209d801d60ab27203730d00ed938c720a018c720501938c720a02997208720993b17203730e93b2e4c672020411730f00720993b2e4c6b2a57310000411731100999ab2e4c67201041173120072097207d17313\'::text) AND (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text))\n        ), supply AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text)\n          GROUP BY assets.token_id\n        ), vals AS (\n         SELECT ( SELECT COALESCE(vested.amount, (0)::numeric) AS "coalesce"\n                   FROM vested) AS vested,\n            ( SELECT COALESCE(staked.amount, (0)::numeric) AS "coalesce"\n                   FROM staked) AS staked,\n            ( SELECT COALESCE(emitted.amount, (0)::numeric) AS "coalesce"\n                   FROM emitted) AS emitted,\n            ( SELECT COALESCE(stake_pool.amount, (0)::numeric) AS "coalesce"\n                   FROM stake_pool) AS stake_pool,\n            ( SELECT COALESCE(supply.amount, (0)::numeric) AS "coalesce"\n                   FROM supply) AS supply\n        )\n SELECT \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text AS token_id,\n    t.decimals,\n    t.token_price,\n    v.vested,\n    v.staked,\n    v.emitted,\n    v.stake_pool,\n    v.supply,\n    (((v.supply - v.vested) - v.emitted) - v.stake_pool) AS in_circulation,\n    (((v.vested)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS vested_actual,\n    (((v.staked)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS staked_actual,\n    (((v.emitted)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS emitted_actual,\n    (((v.stake_pool)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS stake_pool_actual,\n    (((v.supply)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS supply_actual,\n    (((((v.supply - v.vested) - v.emitted) - v.stake_pool) / (t.decimals)::numeric))::numeric(32,2) AS in_circulation_actual\n   FROM (vals v\n     JOIN tokens t ON (((t.token_id)::text = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text)))'
    )
    op.drop_entity(public_v_tokenomics_paideia)

    public_v_unspent_by_token = PGView(
        schema="public",
        signature="v_unspent_by_token",
        definition='SELECT DISTINCT (each(utxos.assets)).key AS token_id,\n    utxos.box_id\n   FROM utxos'
    )
    op.drop_entity(public_v_unspent_by_token)

    public_v_vesting = PGView(
        schema="public",
        signature="v_vesting",
        definition='WITH v AS (\n         SELECT utxos.id,\n            utxos.ergo_tree,\n            utxos.box_id,\n            (utxos.registers -> \'R4\'::text) AS parameters,\n            "right"((utxos.registers -> \'R5\'::text), (length((utxos.registers -> \'R5\'::text)) - 4)) AS vesting_key_id,\n            ((each(utxos.assets)).key)::character varying(64) AS token_id,\n            (each(utxos.assets)).value AS remaining\n           FROM utxos\n          WHERE (utxos.ergo_tree = ANY (ARRAY[\'100e04020400040404000402040604000402040204000400040404000400d810d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605e4c6a70411d6069d99db6903db6503feb27205730200b27205730300d607b27205730400d608b27205730500d6099972087204d60a9592720672079972087209999d9c7206720872077209d60b937204720ad60c95720bb2a5730600b2a5730700d60ddb6308720cd60eb2720d730800d60f8c720301d610b2a5730900d1eded96830201aedb63087201d901114d0e938c721101720293c5b2a4730a00c5a79683050193c2720cc2720193b1720d730b938cb2720d730c00017202938c720e01720f938c720e02720aec720bd801d611b2db63087210730d009683060193c17210c1a793c27210c2a7938c721101720f938c721102997204720a93e4c67210050e720293e4c6721004117205\'::text, \'1012040204000404040004020406040c0408040a050004000402040204000400040404000400d812d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605db6903db6503fed606e4c6a70411d6079d997205b27206730200b27206730300d608b27206730400d609b27206730500d60a9972097204d60b95917205b272067306009d9c7209b27206730700b272067308007309d60c959272077208997209720a999a9d9c7207997209720b7208720b720ad60d937204720cd60e95720db2a5730a00b2a5730b00d60fdb6308720ed610b2720f730c00d6118c720301d612b2a5730d00d1eded96830201aedb63087201d901134d0e938c721301720293c5b2a4730e00c5a79683050193c2720ec2720193b1720f730f938cb2720f731000017202938c7210017211938c721002720cec720dd801d613b2db630872127311009683060193c17212c1a793c27212c2a7938c7213017211938c721302997204720c93e4c67212050e720293e4c6721204117206\'::text, \'10070400040204000500040004000400d80bd601e4c6a7040ed602b2db6308a7730000d6038c720201d604e4c6a70805d605e4c6a70705d606e4c6a70505d607e4c6a70605d6089c9d99db6903db6503fe720572067207d6098c720202d60a9972047209d60b958f99720472087207997204720a997208720ad1ed93b0b5a5d9010c63ededed93c2720c720193e4c6720c040ee4c6a7090e93b1db6308720c7301938cb2db6308720c7302000172037303d9010c41639a8c720c018cb2db63088c720c0273040002720bec937209720baea5d9010c63ededededededededed93c1720cc1a793c2720cc2a7938cb2db6308720c730500017203938cb2db6308720c73060002997209720b93e4c6720c040e720193e4c6720c0505720693e4c6720c0605720793e4c6720c0705720593e4c6720c0805720493e4c6720c090ee4c6a7090e\'::text, \'100e04020400040404000402040604000402040204000400040404000400d810d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605e4c6a70411d6069d99db6903db6503feb27205730200b27205730300d607b27205730400d608b27205730500d6099972087204d60a9592720672079972087209999d9c7206720872077209d60b937204720ad60c95720bb2a5730600b2a5730700d60ddb6308720cd60eb2720d730800d60f8c720301d610b2a5730900d1eded96830201aedb63087201d901114d0e938c721101720293c5b2a4730a00c5a79683050193c2720cc2720193b1720d730b938cb2720d730c00017202938c720e01720f938c720e02720aec720bd801d611b2db63087210730d009683060193c17210c1a793c27210c2a7938c721101720f938c721102997204720a93e4c67210050e720293e4c6721004117205\'::text]))\n        ), a AS (\n         SELECT utxos.address,\n            ((each(utxos.assets)).key)::character varying(64) AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount\n           FROM utxos\n          WHERE ((utxos.address)::text <> \'\'::text)\n        )\n SELECT v.box_id,\n    (v.vesting_key_id)::character varying(64) AS vesting_key_id,\n    (v.parameters)::character varying(1024) AS parameters,\n    v.token_id,\n    (v.remaining)::bigint AS remaining,\n    a.address,\n    v.ergo_tree\n   FROM (v\n     JOIN a ON (((a.token_id)::text = v.vesting_key_id)))'
    )
    op.drop_entity(public_v_vesting)

    public_token_config = PGMaterializedView(
                schema="public",
                signature="token_config",
                definition="SELECT 'paideia'::text AS token_name,\n    '1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489'::text AS token_id,\n    '245957934c20285ada547aa8f2c8e6f7637be86a1985b3e4c36e4e1ad8ce97ab'::text AS proxy_address,\n    '101f040004000e2012bbef36eaa5e61b64d519196a1e8ebea360f18aba9b02d2a21b16f26208960f040204000400040001000e20b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f0910402040004000402040204000400050204020402040604000100040404020402010001010100040201000100d807d601b2a4730000d6028cb2db6308720173010001d6039372027302d604e4c6a70411d605e4c6a7050ed60695ef7203ed93c5b2a4730300c5a78fb2e4c6b2a57304000411730500b2e4c6720104117306007307d6079372027308d1ecec957203d80ad608b2a5dc0c1aa402a7730900d609e4c672080411d60adb63087208d60bb2720a730a00d60cdb6308a7d60db2720c730b00d60eb2720a730c00d60fb2720c730d00d6107e8c720f0206d611e4c6720104119683090193c17208c1a793c27208c2a793b27209730e009ab27204730f00731093e4c67208050e720593b27209731100b27204731200938c720b018c720d01938c720b028c720d02938c720e018c720f01937e8c720e02069a72109d9c7eb272117313000672107eb27211731400067315957206d801d608b2a5731600ed72079593c27208c2a7d801d609c67208050e95e67209ed93e472097205938cb2db6308b2a57317007318000172057319731a731b9595efec7206720393c5b2a4731c00c5a7731d7207731e'::text AS stake_tree",
                with_data=True
            )

    op.drop_entity(public_token_config)

    public_token_free = PGMaterializedView(
                schema="public",
                signature="token_free",
                definition='SELECT a.address,\n    ((a.amount)::double precision / power((10)::double precision, (t.decimals)::double precision)) AS amount\n   FROM ((assets a\n     JOIN token_config tid ON ((tid.token_id = (a.token_id)::text)))\n     JOIN tokens t ON (((t.token_id)::text = (a.token_id)::text)))',
                with_data=True
            )

    op.drop_entity(public_token_free)

    public_token_staked = PGMaterializedView(
                schema="public",
                signature="token_staked",
                definition="SELECT u.box_id,\n    u.height,\n    ((u.assets -> tid.token_id))::bigint AS amount,\n    ((u.assets -> tid.proxy_address))::integer AS proxy,\n    (u.registers -> 'R4'::text) AS penalty,\n    regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n    t.decimals,\n    t.token_id\n   FROM ((utxos u\n     JOIN token_config tid ON ((tid.stake_tree = u.ergo_tree)))\n     JOIN tokens t ON (((t.token_id)::text = tid.token_id)))",
                with_data=True
            )

    op.drop_entity(public_token_staked)

    public_audit_stats = PGMaterializedView(
                schema="public",
                signature="audit_stats",
                definition='WITH ss AS (\n         SELECT audit_log.created_at,\n            lag(audit_log.created_at) OVER (ORDER BY audit_log.created_at) AS prev,\n            audit_log.height,\n            audit_log.service\n           FROM audit_log\n        )\n SELECT max(ss.height) AS max_height,\n    avg((ss.created_at - ss.prev)) AS avg_block,\n    count(*) AS block_count,\n    ss.service\n   FROM ss\n  WHERE (ss.created_at IS NOT NULL)\n  GROUP BY ss.service',
                with_data=True
            )

    op.drop_entity(public_audit_stats)

    public_registers_by_token = PGMaterializedView(
                schema="public",
                signature="registers_by_token",
                definition='WITH ep AS (\n         SELECT utxos.box_id,\n            skeys(utxos.assets) AS token_id\n           FROM utxos\n        )\n SELECT u.box_id,\n    ep.token_id,\n    (u.assets -> ep.token_id) AS amount,\n    hstore_to_json(u.registers) AS registers\n   FROM (utxos u\n     JOIN ep ON (((ep.box_id)::text = (u.box_id)::text)))',
                with_data=True
            )

    op.drop_entity(public_registers_by_token)

    public_staking = PGMaterializedView(
                schema="public",
                signature="staking",
                definition="WITH ergopad AS (\n         SELECT 'ergopad'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text))::bigint AS amount,\n            ((u.assets -> '1028de73d018f0c9a374b71555c5b8f1390994f2f41633e7b9d68f77735782ee'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text)))\n          WHERE (u.ergo_tree = '1017040004000e200549ea3374a36b7a22a803766af732e61798463c3332c5f6d86c8ab9195eed59040204000400040204020400040005020402040204060400040204040e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402010001010100d802d601b2a4730000d6028cb2db6308720173010001959372027302d80bd603b2a5dc0c1aa402a7730300d604e4c672030411d605e4c6a70411d606db63087203d607b27206730400d608db6308a7d609b27208730500d60ab27206730600d60bb27208730700d60c8c720b02d60de4c672010411d19683090193c17203c1a793c27203c2a793b272047308009ab27205730900730a93e4c67203050ee4c6a7050e93b27204730b00b27205730c00938c7207018c720901938c7207028c720902938c720a018c720b01938c720a029a720c9d9cb2720d730d00720cb2720d730e00d801d603b2a4730f009593c57203c5a7d801d604b2a5731000d1ed93720273119593c27204c2a7d801d605c67204050e95e67205ed93e47205e4c6a7050e938cb2db6308b2a573120073130001e4c67203050e73147315d17316'::text)\n        ), paideia AS (\n         SELECT 'paideia'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489'::text))::bigint AS amount,\n            ((u.assets -> '245957934c20285ada547aa8f2c8e6f7637be86a1985b3e4c36e4e1ad8ce97ab'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489'::text)))\n          WHERE (u.ergo_tree = '101f040004000e2012bbef36eaa5e61b64d519196a1e8ebea360f18aba9b02d2a21b16f26208960f040204000400040001000e20b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f0910402040004000402040204000400050204020402040604000100040404020402010001010100040201000100d807d601b2a4730000d6028cb2db6308720173010001d6039372027302d604e4c6a70411d605e4c6a7050ed60695ef7203ed93c5b2a4730300c5a78fb2e4c6b2a57304000411730500b2e4c6720104117306007307d6079372027308d1ecec957203d80ad608b2a5dc0c1aa402a7730900d609e4c672080411d60adb63087208d60bb2720a730a00d60cdb6308a7d60db2720c730b00d60eb2720a730c00d60fb2720c730d00d6107e8c720f0206d611e4c6720104119683090193c17208c1a793c27208c2a793b27209730e009ab27204730f00731093e4c67208050e720593b27209731100b27204731200938c720b018c720d01938c720b028c720d02938c720e018c720f01937e8c720e02069a72109d9c7eb272117313000672107eb27211731400067315957206d801d608b2a5731600ed72079593c27208c2a7d801d609c67208050e95e67209ed93e472097205938cb2db6308b2a57317007318000172057319731a731b9595efec7206720393c5b2a4731c00c5a7731d7207731e'::text)\n        ), egio AS (\n         SELECT 'egio'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text))::bigint AS amount,\n            ((u.assets -> '012d649686deeef606d253146bec0cf623f9b84574fbfa0fd0d1091393923613'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text)))\n          WHERE (u.ergo_tree = '1017040004000e20a8d633dee705ff90e3181013381455353dac2d91366952209ac6b3f9cdcc23e9040204000400040204020400040005020402040204060400040204040e20f419099a27aaa5f6f7d109d8773b1862e8d1857b44aa7d86395940d41eb5380604020402010001010100d802d601b2a4730000d6028cb2db6308720173010001959372027302d80bd603b2a5dc0c1aa402a7730300d604e4c672030411d605e4c6a70411d606db63087203d607b27206730400d608db6308a7d609b27208730500d60ab27206730600d60bb27208730700d60c8c720b02d60de4c672010411d19683090193c17203c1a793c27203c2a793b272047308009ab27205730900730a93e4c67203050ee4c6a7050e93b27204730b00b27205730c00938c7207018c720901938c7207028c720902938c720a018c720b01938c720a029a720c9d9cb2720d730d00720cb2720d730e00d801d603b2a4730f009593c57203c5a7d801d604b2a5731000d1ed93720273119593c27204c2a7d801d605c67204050e95e67205ed93e47205e4c6a7050e938cb2db6308b2a573120073130001e4c67203050e73147315d17316'::text)\n        ), egiov2 AS (\n         SELECT 'egiov2'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text))::bigint AS amount,\n            ((u.assets -> '012d649686deeef606d253146bec0cf623f9b84574fbfa0fd0d1091393923613'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text)))\n          WHERE (u.ergo_tree = '101b0400040004020e20097fd281c99588269d672e1b686bf6bcdce04102e183b2242f6634d93869fc0a04020e200e4202196f6030ab1986e39012dc95ea10f034b13d90a70c0b1f86d986106ff6040204000400040204000400050204020402040604000100040004000400040401000402040201010100d809d601b2a4730000d6028cb2db6308720173010001d603e4c6a70411d604e4c6a7050ed605db6308a7d606b27205730200d6077e8c72060206d6089372027303d60993c5b2a4730400c5a7d1ecec959372027305d807d60ab2a5dc0c1aa402a7730600d60be4c6720a0411d60cdb6308720ad60db2720c730700d60eb27205730800d60fb2720c730900d610e4c6720104119683090193c1720ac1a793c2720ac2a793b2720b730a009ab27203730b00730c93b2720b730d00b27203730e0093e4c6720a050e7204938c720d018c720e01938c720d028c720e02938c720f018c720601937e8c720f02069a72079d9c7eb27210730f000672077eb272107310000673119596830301720872098fb2e4c6b2a57312000411731300b2e4c672010411731400d801d60ab2a57315009593c2720ac2a7d801d60bc6720a050e9683020195e6720b93e4720b72047316938cb2db6308b2a57317007318000172047319731a9683020172087209'::text)\n        ), neta AS (\n         SELECT 'neta'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8'::text))::bigint AS amount,\n            ((u.assets -> 'a94787d05eefbd1b773b62812123b91c40553bd5ed7f3092ae66dba3f812e0c0'::text))::bigint AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id,\n            u.assets\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8'::text)))\n          WHERE (u.ergo_tree = '101b0400040004020e209e5e5e0a3abbaeaf0e54e1e2ca4a6a96c9b7151dd6d7ddaf738be2f99a54dc2b04020e203f38af5d8ce0549390feb2e1a0cd614c865d7578425683bcdb0101630e1a66d4040204000400040204000400050204020402040604000100040004000400040401000402040201010100d809d601b2a4730000d6028cb2db6308720173010001d603e4c6a70411d604e4c6a7050ed605db6308a7d606b27205730200d6077e8c72060206d6089372027303d60993c5b2a4730400c5a7d1ecec959372027305d807d60ab2a5dc0c1aa402a7730600d60be4c6720a0411d60cdb6308720ad60db2720c730700d60eb27205730800d60fb2720c730900d610e4c6720104119683090193c1720ac1a793c2720ac2a793b2720b730a009ab27203730b00730c93b2720b730d00b27203730e0093e4c6720a050e7204938c720d018c720e01938c720d028c720e02938c720f018c720601937e8c720f02069a72079d9c7eb27210730f000672077eb272107310000673119596830301720872098fb2e4c6b2a57312000411731300b2e4c672010411731400d801d60ab2a57315009593c2720ac2a7d801d60bc6720a050e9683020195e6720b93e4720b72047316938cb2db6308b2a57317007318000172047319731a9683020172087209'::text)\n        ), a AS (\n         SELECT utxos.address,\n            utxos.id,\n            ((each(utxos.assets)).key)::character varying(64) AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount\n           FROM utxos\n        )\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (ergopad u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (paideia u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (egio u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (egiov2 u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (neta u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)",
                with_data=True
            )

    op.drop_entity(public_staking)

    public_tokenomics_egio = PGMaterializedView(
                schema="public",
                signature="tokenomics_egio",
                definition='WITH assets AS (\n         SELECT (each(utxos.assets)).key AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount,\n            utxos.ergo_tree\n           FROM utxos\n        ), vested AS (\n         SELECT 0 AS amount\n        ), emitted AS (\n         SELECT 0 AS amount\n        ), staked AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'101b0400040004020e20097fd281c99588269d672e1b686bf6bcdce04102e183b2242f6634d93869fc0a04020e200e4202196f6030ab1986e39012dc95ea10f034b13d90a70c0b1f86d986106ff6040204000400040204000400050204020402040604000100040004000400040401000402040201010100d809d601b2a4730000d6028cb2db6308720173010001d603e4c6a70411d604e4c6a7050ed605db6308a7d606b27205730200d6077e8c72060206d6089372027303d60993c5b2a4730400c5a7d1ecec959372027305d807d60ab2a5dc0c1aa402a7730600d60be4c6720a0411d60cdb6308720ad60db2720c730700d60eb27205730800d60fb2720c730900d610e4c6720104119683090193c1720ac1a793c2720ac2a793b2720b730a009ab27203730b00730c93b2720b730d00b27203730e0093e4c6720a050e7204938c720d018c720e01938c720d028c720e02938c720f018c720601937e8c720f02069a72079d9c7eb27210730f000672077eb272107310000673119596830301720872098fb2e4c6b2a57312000411731300b2e4c672010411731400d801d60ab2a57315009593c2720ac2a7d801d60bc6720a050e9683020195e6720b93e4720b72047316938cb2db6308b2a57317007318000172047319731a9683020172087209\'::text) AND (assets.token_id = \'00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3\'::text))\n        ), stake_pool AS (\n         SELECT 0 AS amount\n        ), supply AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.token_id = \'00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3\'::text)\n          GROUP BY assets.token_id\n        ), vals AS (\n         SELECT ( SELECT COALESCE(vested.amount, 0) AS "coalesce"\n                   FROM vested) AS vested,\n            ( SELECT COALESCE(staked.amount, (0)::numeric) AS "coalesce"\n                   FROM staked) AS staked,\n            ( SELECT COALESCE(emitted.amount, 0) AS "coalesce"\n                   FROM emitted) AS emitted,\n            ( SELECT COALESCE(stake_pool.amount, 0) AS "coalesce"\n                   FROM stake_pool) AS stake_pool,\n            ( SELECT COALESCE(supply.amount, (0)::numeric) AS "coalesce"\n                   FROM supply) AS supply\n        )\n SELECT \'00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3\'::text AS token_id,\n    t.decimals,\n    t.token_price,\n    v.vested,\n    v.staked,\n    v.emitted,\n    v.stake_pool,\n    v.supply,\n    (((v.supply - (v.vested)::numeric) - (v.emitted)::numeric) - (v.stake_pool)::numeric) AS in_circulation,\n    (((v.vested)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS vested_actual,\n    (((v.staked)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS staked_actual,\n    (((v.emitted)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS emitted_actual,\n    (((v.stake_pool)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS stake_pool_actual,\n    (((v.supply)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS supply_actual,\n    (((((v.supply - (v.vested)::numeric) - (v.emitted)::numeric) - (v.stake_pool)::numeric) / (t.decimals)::numeric))::numeric(32,2) AS in_circulation_actual\n   FROM (vals v\n     JOIN tokens t ON (((t.token_id)::text = \'00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3\'::text)))',
                with_data=True
            )

    op.drop_entity(public_tokenomics_egio)

    public_balances = PGMaterializedView(
                schema="public",
                signature="balances",
                definition="SELECT utxos.address,\n    sum(utxos.nergs) AS nergs\n   FROM utxos\n  WHERE ((utxos.address)::text <> ''::text)\n  GROUP BY utxos.address",
                with_data=True
            )

    op.drop_entity(public_balances)

    public_token_locked = PGMaterializedView(
                schema="public",
                signature="token_locked",
                definition="WITH adr AS (\n         SELECT u_1.address,\n            u_1.id,\n            ((each(u_1.assets)).key)::character varying(64) AS token_id,\n            ((each(u_1.assets)).value)::bigint AS amount\n           FROM utxos u_1\n          WHERE ((u_1.address)::text <> ''::text)\n        )\n SELECT adr.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty\n   FROM (token_staked u\n     JOIN adr ON (((adr.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)",
                with_data=True
            )

    op.drop_entity(public_token_locked)

    public_token_status = PGMaterializedView(
                schema="public",
                signature="token_status",
                definition="WITH paideia_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? 'b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f091'::text)\n         LIMIT 1\n        ), paideia_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '93cda90b4fe24f075d7961fa0d1d662fdc7e1349d313059b9618eecb16c5eade'::text)\n         LIMIT 1\n        ), ergopad_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '05cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f3125'::text)\n         LIMIT 1\n        ), ergopad_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '0d01f2f0b3254b4a1731e1b61ad77641fe54de2bd68d1c6fc1ae4e7e9ddfb212'::text)\n         LIMIT 1\n        ), egio_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? 'f419099a27aaa5f6f7d109d8773b1862e8d1857b44aa7d86395940d41eb53806'::text)\n         LIMIT 1\n        ), egio_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '07a8648d0de0f7c87aad41a1fbc6d393a6ad95584d38c47c88125bef101c29e9'::text)\n         LIMIT 1\n        ), egiov2_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '097fd281c99588269d672e1b686bf6bcdce04102e183b2242f6634d93869fc0a'::text)\n         LIMIT 1\n        ), egiov2_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? 'dc22db903e5ac54da5d4b6f33dd13b2330b79a9ae473f9dd3ea0d796c1179443'::text)\n         LIMIT 1\n        ), neta_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '9e5e5e0a3abbaeaf0e54e1e2ca4a6a96c9b7151dd6d7ddaf738be2f99a54dc2b'::text)\n         LIMIT 1\n        ), neta_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '8a4f19b27efeaa328e9ba03f0752253713e6b477cdb9ea7d5e8857e671c48e60'::text)\n         LIMIT 1\n        )\n SELECT 'paideia'::text AS token_name,\n    paideia_st.r4 AS str4,\n    paideia_pl.r4 AS plr4,\n    4 AS dcml\n   FROM paideia_st,\n    paideia_pl\nUNION\n SELECT 'ergopad'::text AS token_name,\n    ergopad_st.r4 AS str4,\n    ergopad_pl.r4 AS plr4,\n    2 AS dcml\n   FROM ergopad_st,\n    ergopad_pl\nUNION\n SELECT 'egio'::text AS token_name,\n    egio_st.r4 AS str4,\n    egio_pl.r4 AS plr4,\n    4 AS dcml\n   FROM egio_st,\n    egio_pl\nUNION\n SELECT 'egiov2'::text AS token_name,\n    egiov2_st.r4 AS str4,\n    egiov2_pl.r4 AS plr4,\n    4 AS dcml\n   FROM egiov2_st,\n    egiov2_pl\nUNION\n SELECT 'neta'::text AS token_name,\n    neta_st.r4 AS str4,\n    neta_pl.r4 AS plr4,\n    6 AS dcml\n   FROM neta_st,\n    neta_pl",
                with_data=True
            )

    op.drop_entity(public_token_status)

    public_tokenomics_ergopad = PGMaterializedView(
                schema="public",
                signature="tokenomics_ergopad",
                definition="WITH assets AS (\n         SELECT (each(utxos.assets)).key AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount,\n            utxos.ergo_tree\n           FROM utxos\n        ), vested AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.ergo_tree = '10070400040204000500040004000400d80bd601e4c6a7040ed602b2db6308a7730000d6038c720201d604e4c6a70805d605e4c6a70705d606e4c6a70505d607e4c6a70605d6089c9d99db6903db6503fe720572067207d6098c720202d60a9972047209d60b958f99720472087207997204720a997208720ad1ed93b0b5a5d9010c63ededed93c2720c720193e4c6720c040ee4c6a7090e93b1db6308720c7301938cb2db6308720c7302000172037303d9010c41639a8c720c018cb2db63088c720c0273040002720bec937209720baea5d9010c63ededededededededed93c1720cc1a793c2720cc2a7938cb2db6308720c730500017203938cb2db6308720c73060002997209720b93e4c6720c040e720193e4c6720c0505720693e4c6720c0605720793e4c6720c0705720593e4c6720c0805720493e4c6720c090ee4c6a7090e'::text)\n        ), emitted AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.ergo_tree = '102d04000e20d71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de41304000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504040404040604020400040204040402050004020400040004020402040404040400040004000402040004000e201028de73d018f0c9a374b71555c5b8f1390994f2f41633e7b9d68f77735782ee040004020100040604000500040204000400040204020400040204020404040404060100d802d601b2a4730000d602730195ed938cb2db6308720173020001730393c5b2a4730400c5a7d80ad603b2a5730500d604e4c672030411d605e4c672010411d606b27204730600d607b2a4730700d608b2e4c672070411730800d609db6308a7d60a9a8cb2db63087207730900029592b17209730a8cb27209730b0002730cd60bdb63087203d60cb2720b730d00d19683080193c27203c2a793b27204730e00b27205730f0093b27204731000b2720573110093b27204731200b27205731300937206958f7208720a7208720a938cb2720b731400018cb2720973150001938c720c017202938c720c0272069593c57201c5a7d80ad603b2a5731600d604db63087203d605db6308a7d6068cb2720573170002d607b5a4d9010763d801d609db630872079591b172097318ed938cb2720973190001731a93b2e4c672070411731b00b2e4c6a70411731c00731dd608e4c6a70411d609b27208731e00d60ab27208731f00d60bb072077320d9010b41639a8c720b019d9c8cb2db63088c720b02732100027209720ad60ce4c672030411d19683070193c27203c2a7938cb27204732200018cb272057323000195907206720b93b172047324d801d60db27204732500ed938c720d017202928c720d02997206720b93b2720c732600720a93b2720c732700b2720873280093b2720c73290099b27208732a007eb172070593b2720c732b007209d1732c'::text)\n        ), staked AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = '1017040004000e200549ea3374a36b7a22a803766af732e61798463c3332c5f6d86c8ab9195eed59040204000400040204020400040005020402040204060400040204040e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402010001010100d802d601b2a4730000d6028cb2db6308720173010001959372027302d80bd603b2a5dc0c1aa402a7730300d604e4c672030411d605e4c6a70411d606db63087203d607b27206730400d608db6308a7d609b27208730500d60ab27206730600d60bb27208730700d60c8c720b02d60de4c672010411d19683090193c17203c1a793c27203c2a793b272047308009ab27205730900730a93e4c67203050ee4c6a7050e93b27204730b00b27205730c00938c7207018c720901938c7207028c720902938c720a018c720b01938c720a029a720c9d9cb2720d730d00720cb2720d730e00d801d603b2a4730f009593c57203c5a7d801d604b2a5731000d1ed93720273119593c27204c2a7d801d605c67204050e95e67205ed93e47205e4c6a7050e938cb2db6308b2a573120073130001e4c67203050e73147315d17316'::text) AND (assets.token_id = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text))\n        ), stake_pool AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = '1014040004000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402040204040404040205000400040004000402040204000400040004000100d801d601b2a473000095ed938cb2db6308720173010001730293c5b2a4730300c5a7d808d602b2a5730400d603db63087202d604db6308a7d605b27204730500d606db6308b2a4730600d6079592b1720673078cb27206730800027309d6089a8c7205027207d609b2e4c6a70411730a00d19683050193c27202c2a7938cb27203730b00018cb27204730c0001959172087209d801d60ab27203730d00ed938c720a018c720501938c720a02997208720993b17203730e93b2e4c672020411730f00720993b2e4c6b2a57310000411731100999ab2e4c67201041173120072097207d17313'::text) AND (assets.token_id = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text))\n        ), supply AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.token_id = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text)\n          GROUP BY assets.token_id\n        ), vals AS (\n         SELECT ( SELECT vested.amount\n                   FROM vested) AS vested,\n            ( SELECT staked.amount\n                   FROM staked) AS staked,\n            ( SELECT emitted.amount\n                   FROM emitted) AS emitted,\n            ( SELECT stake_pool.amount\n                   FROM stake_pool) AS stake_pool,\n            ( SELECT supply.amount\n                   FROM supply) AS supply\n        )\n SELECT 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text AS token_id,\n    t.decimals,\n    t.token_price,\n    COALESCE(v.vested, 0.0) AS vested,\n    v.staked,\n    v.emitted,\n    v.stake_pool,\n    v.supply,\n    (((v.supply - COALESCE(v.vested, 0.0)) - v.emitted) - v.stake_pool) AS in_circulation,\n    (((COALESCE(v.vested, 0.0))::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS vested_actual,\n    (((v.staked)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS staked_actual,\n    (((v.emitted)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS emitted_actual,\n    (((v.stake_pool)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS stake_pool_actual,\n    (((v.supply)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS supply_actual,\n    (((((v.supply - COALESCE(v.vested, 0.0)) - v.emitted) - v.stake_pool) / (t.decimals)::numeric))::numeric(32,2) AS in_circulation_actual\n   FROM (vals v\n     JOIN tokens t ON (((t.token_id)::text = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text)))",
                with_data=True
            )

    op.drop_entity(public_tokenomics_ergopad)

    public_tokenomics_neta = PGMaterializedView(
                schema="public",
                signature="tokenomics_neta",
                definition='WITH assets AS (\n         SELECT (each(utxos.assets)).key AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount,\n            utxos.ergo_tree\n           FROM utxos\n        ), vested AS (\n         SELECT 0 AS amount\n        ), emitted AS (\n         SELECT 0 AS amount\n        ), staked AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'101b0400040004020e209e5e5e0a3abbaeaf0e54e1e2ca4a6a96c9b7151dd6d7ddaf738be2f99a54dc2b04020e203f38af5d8ce0549390feb2e1a0cd614c865d7578425683bcdb0101630e1a66d4040204000400040204000400050204020402040604000100040004000400040401000402040201010100d809d601b2a4730000d6028cb2db6308720173010001d603e4c6a70411d604e4c6a7050ed605db6308a7d606b27205730200d6077e8c72060206d6089372027303d60993c5b2a4730400c5a7d1ecec959372027305d807d60ab2a5dc0c1aa402a7730600d60be4c6720a0411d60cdb6308720ad60db2720c730700d60eb27205730800d60fb2720c730900d610e4c6720104119683090193c1720ac1a793c2720ac2a793b2720b730a009ab27203730b00730c93b2720b730d00b27203730e0093e4c6720a050e7204938c720d018c720e01938c720d028c720e02938c720f018c720601937e8c720f02069a72079d9c7eb27210730f000672077eb272107310000673119596830301720872098fb2e4c6b2a57312000411731300b2e4c672010411731400d801d60ab2a57315009593c2720ac2a7d801d60bc6720a050e9683020195e6720b93e4720b72047316938cb2db6308b2a57317007318000172047319731a9683020172087209\'::text) AND (assets.token_id = \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text))\n        ), stake_pool AS (\n         SELECT 0 AS amount\n        ), supply AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.token_id = \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text)\n          GROUP BY assets.token_id\n        ), vals AS (\n         SELECT ( SELECT COALESCE(vested.amount, 0) AS "coalesce"\n                   FROM vested) AS vested,\n            ( SELECT COALESCE(staked.amount, (0)::numeric) AS "coalesce"\n                   FROM staked) AS staked,\n            ( SELECT COALESCE(emitted.amount, 0) AS "coalesce"\n                   FROM emitted) AS emitted,\n            ( SELECT COALESCE(stake_pool.amount, 0) AS "coalesce"\n                   FROM stake_pool) AS stake_pool,\n            ( SELECT COALESCE(supply.amount, (0)::numeric) AS "coalesce"\n                   FROM supply) AS supply\n        )\n SELECT \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text AS token_id,\n    t.decimals,\n    t.token_price,\n    v.vested,\n    v.staked,\n    v.emitted,\n    v.stake_pool,\n    v.supply,\n    (((v.supply - (v.vested)::numeric) - (v.emitted)::numeric) - (v.stake_pool)::numeric) AS in_circulation,\n    (((v.vested)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS vested_actual,\n    (((v.staked)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS staked_actual,\n    (((v.emitted)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS emitted_actual,\n    (((v.stake_pool)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS stake_pool_actual,\n    (((v.supply)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS supply_actual,\n    (((((v.supply - (v.vested)::numeric) - (v.emitted)::numeric) - (v.stake_pool)::numeric) / (t.decimals)::numeric))::numeric(32,2) AS in_circulation_actual\n   FROM (vals v\n     JOIN tokens t ON (((t.token_id)::text = \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text)))',
                with_data=True
            )

    op.drop_entity(public_tokenomics_neta)

    public_tokenomics_paideia = PGMaterializedView(
                schema="public",
                signature="tokenomics_paideia",
                definition='WITH assets AS (\n         SELECT (each(utxos.assets)).key AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount,\n            utxos.ergo_tree\n           FROM utxos\n        ), vested AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'100e04020400040404000402040604000402040204000400040404000400d810d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605e4c6a70411d6069d99db6903db6503feb27205730200b27205730300d607b27205730400d608b27205730500d6099972087204d60a9592720672079972087209999d9c7206720872077209d60b937204720ad60c95720bb2a5730600b2a5730700d60ddb6308720cd60eb2720d730800d60f8c720301d610b2a5730900d1eded96830201aedb63087201d901114d0e938c721101720293c5b2a4730a00c5a79683050193c2720cc2720193b1720d730b938cb2720d730c00017202938c720e01720f938c720e02720aec720bd801d611b2db63087210730d009683060193c17210c1a793c27210c2a7938c721101720f938c721102997204720a93e4c67210050e720293e4c6721004117205\'::text) AND (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text))\n        ), emitted AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.ergo_tree = \'102d04000e201fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad48904000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504040404040604020400040204040402050004020400040004020402040404040400040004000402040004000e201028de73d018f0c9a374b71555c5b8f1390994f2f41633e7b9d68f77735782ee040004020100040604000500040204000400040204020400040204020404040404060100d802d601b2a4730000d602730195ed938cb2db6308720173020001730393c5b2a4730400c5a7d80ad603b2a5730500d604e4c672030411d605e4c672010411d606b27204730600d607b2a4730700d608b2e4c672070411730800d609db6308a7d60a9a8cb2db63087207730900029592b17209730a8cb27209730b0002730cd60bdb63087203d60cb2720b730d00d19683080193c27203c2a793b27204730e00b27205730f0093b27204731000b2720573110093b27204731200b27205731300937206958f7208720a7208720a938cb2720b731400018cb2720973150001938c720c017202938c720c0272069593c57201c5a7d80ad603b2a5731600d604db63087203d605db6308a7d6068cb2720573170002d607b5a4d9010763d801d609db630872079591b172097318ed938cb2720973190001731a93b2e4c672070411731b00b2e4c6a70411731c00731dd608e4c6a70411d609b27208731e00d60ab27208731f00d60bb072077320d9010b41639a8c720b019d9c8cb2db63088c720b02732100027209720ad60ce4c672030411d19683070193c27203c2a7938cb27204732200018cb272057323000195907206720b93b172047324d801d60db27204732500ed938c720d017202928c720d02997206720b93b2720c732600720a93b2720c732700b2720873280093b2720c73290099b27208732a007eb172070593b2720c732b007209d1732c\'::text)\n        ), staked AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'101f040004000e2012bbef36eaa5e61b64d519196a1e8ebea360f18aba9b02d2a21b16f26208960f040204000400040001000e20b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f0910402040004000402040204000400050204020402040604000100040404020402010001010100040201000100d807d601b2a4730000d6028cb2db6308720173010001d6039372027302d604e4c6a70411d605e4c6a7050ed60695ef7203ed93c5b2a4730300c5a78fb2e4c6b2a57304000411730500b2e4c6720104117306007307d6079372027308d1ecec957203d80ad608b2a5dc0c1aa402a7730900d609e4c672080411d60adb63087208d60bb2720a730a00d60cdb6308a7d60db2720c730b00d60eb2720a730c00d60fb2720c730d00d6107e8c720f0206d611e4c6720104119683090193c17208c1a793c27208c2a793b27209730e009ab27204730f00731093e4c67208050e720593b27209731100b27204731200938c720b018c720d01938c720b028c720d02938c720e018c720f01937e8c720e02069a72109d9c7eb272117313000672107eb27211731400067315957206d801d608b2a5731600ed72079593c27208c2a7d801d609c67208050e95e67209ed93e472097205938cb2db6308b2a57317007318000172057319731a731b9595efec7206720393c5b2a4731c00c5a7731d7207731e\'::text) AND (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text))\n        ), stake_pool AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'1014040004000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402040204040404040205000400040004000402040204000400040004000100d801d601b2a473000095ed938cb2db6308720173010001730293c5b2a4730300c5a7d808d602b2a5730400d603db63087202d604db6308a7d605b27204730500d606db6308b2a4730600d6079592b1720673078cb27206730800027309d6089a8c7205027207d609b2e4c6a70411730a00d19683050193c27202c2a7938cb27203730b00018cb27204730c0001959172087209d801d60ab27203730d00ed938c720a018c720501938c720a02997208720993b17203730e93b2e4c672020411730f00720993b2e4c6b2a57310000411731100999ab2e4c67201041173120072097207d17313\'::text) AND (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text))\n        ), supply AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text)\n          GROUP BY assets.token_id\n        ), vals AS (\n         SELECT ( SELECT COALESCE(vested.amount, (0)::numeric) AS "coalesce"\n                   FROM vested) AS vested,\n            ( SELECT COALESCE(staked.amount, (0)::numeric) AS "coalesce"\n                   FROM staked) AS staked,\n            ( SELECT COALESCE(emitted.amount, (0)::numeric) AS "coalesce"\n                   FROM emitted) AS emitted,\n            ( SELECT COALESCE(stake_pool.amount, (0)::numeric) AS "coalesce"\n                   FROM stake_pool) AS stake_pool,\n            ( SELECT COALESCE(supply.amount, (0)::numeric) AS "coalesce"\n                   FROM supply) AS supply\n        )\n SELECT \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text AS token_id,\n    t.decimals,\n    t.token_price,\n    v.vested,\n    v.staked,\n    v.emitted,\n    v.stake_pool,\n    v.supply,\n    (((v.supply - v.vested) - v.emitted) - v.stake_pool) AS in_circulation,\n    (((v.vested)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS vested_actual,\n    (((v.staked)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS staked_actual,\n    (((v.emitted)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS emitted_actual,\n    (((v.stake_pool)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS stake_pool_actual,\n    (((v.supply)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS supply_actual,\n    (((((v.supply - v.vested) - v.emitted) - v.stake_pool) / (t.decimals)::numeric))::numeric(32,2) AS in_circulation_actual\n   FROM (vals v\n     JOIN tokens t ON (((t.token_id)::text = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text)))',
                with_data=True
            )

    op.drop_entity(public_tokenomics_paideia)

    public_unspent_by_token = PGMaterializedView(
                schema="public",
                signature="unspent_by_token",
                definition='SELECT DISTINCT (each(utxos.assets)).key AS token_id,\n    utxos.box_id\n   FROM utxos',
                with_data=True
            )

    op.drop_entity(public_unspent_by_token)

    public_vesting = PGMaterializedView(
                schema="public",
                signature="vesting",
                definition='WITH v AS (\n         SELECT utxos.id,\n            utxos.ergo_tree,\n            utxos.box_id,\n            (utxos.registers -> \'R4\'::text) AS parameters,\n            "right"((utxos.registers -> \'R5\'::text), (length((utxos.registers -> \'R5\'::text)) - 4)) AS vesting_key_id,\n            ((each(utxos.assets)).key)::character varying(64) AS token_id,\n            (each(utxos.assets)).value AS remaining\n           FROM utxos\n          WHERE (utxos.ergo_tree = ANY (ARRAY[\'100e04020400040404000402040604000402040204000400040404000400d810d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605e4c6a70411d6069d99db6903db6503feb27205730200b27205730300d607b27205730400d608b27205730500d6099972087204d60a9592720672079972087209999d9c7206720872077209d60b937204720ad60c95720bb2a5730600b2a5730700d60ddb6308720cd60eb2720d730800d60f8c720301d610b2a5730900d1eded96830201aedb63087201d901114d0e938c721101720293c5b2a4730a00c5a79683050193c2720cc2720193b1720d730b938cb2720d730c00017202938c720e01720f938c720e02720aec720bd801d611b2db63087210730d009683060193c17210c1a793c27210c2a7938c721101720f938c721102997204720a93e4c67210050e720293e4c6721004117205\'::text, \'1012040204000404040004020406040c0408040a050004000402040204000400040404000400d812d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605db6903db6503fed606e4c6a70411d6079d997205b27206730200b27206730300d608b27206730400d609b27206730500d60a9972097204d60b95917205b272067306009d9c7209b27206730700b272067308007309d60c959272077208997209720a999a9d9c7207997209720b7208720b720ad60d937204720cd60e95720db2a5730a00b2a5730b00d60fdb6308720ed610b2720f730c00d6118c720301d612b2a5730d00d1eded96830201aedb63087201d901134d0e938c721301720293c5b2a4730e00c5a79683050193c2720ec2720193b1720f730f938cb2720f731000017202938c7210017211938c721002720cec720dd801d613b2db630872127311009683060193c17212c1a793c27212c2a7938c7213017211938c721302997204720c93e4c67212050e720293e4c6721204117206\'::text, \'10070400040204000500040004000400d80bd601e4c6a7040ed602b2db6308a7730000d6038c720201d604e4c6a70805d605e4c6a70705d606e4c6a70505d607e4c6a70605d6089c9d99db6903db6503fe720572067207d6098c720202d60a9972047209d60b958f99720472087207997204720a997208720ad1ed93b0b5a5d9010c63ededed93c2720c720193e4c6720c040ee4c6a7090e93b1db6308720c7301938cb2db6308720c7302000172037303d9010c41639a8c720c018cb2db63088c720c0273040002720bec937209720baea5d9010c63ededededededededed93c1720cc1a793c2720cc2a7938cb2db6308720c730500017203938cb2db6308720c73060002997209720b93e4c6720c040e720193e4c6720c0505720693e4c6720c0605720793e4c6720c0705720593e4c6720c0805720493e4c6720c090ee4c6a7090e\'::text, \'100e04020400040404000402040604000402040204000400040404000400d810d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605e4c6a70411d6069d99db6903db6503feb27205730200b27205730300d607b27205730400d608b27205730500d6099972087204d60a9592720672079972087209999d9c7206720872077209d60b937204720ad60c95720bb2a5730600b2a5730700d60ddb6308720cd60eb2720d730800d60f8c720301d610b2a5730900d1eded96830201aedb63087201d901114d0e938c721101720293c5b2a4730a00c5a79683050193c2720cc2720193b1720d730b938cb2720d730c00017202938c720e01720f938c720e02720aec720bd801d611b2db63087210730d009683060193c17210c1a793c27210c2a7938c721101720f938c721102997204720a93e4c67210050e720293e4c6721004117205\'::text]))\n        ), a AS (\n         SELECT utxos.address,\n            ((each(utxos.assets)).key)::character varying(64) AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount\n           FROM utxos\n          WHERE ((utxos.address)::text <> \'\'::text)\n        )\n SELECT v.box_id,\n    (v.vesting_key_id)::character varying(64) AS vesting_key_id,\n    (v.parameters)::character varying(1024) AS parameters,\n    v.token_id,\n    (v.remaining)::bigint AS remaining,\n    a.address,\n    v.ergo_tree\n   FROM (v\n     JOIN a ON (((a.token_id)::text = v.vesting_key_id)))',
                with_data=True
            )

    op.drop_entity(public_vesting)

    public_hstore = PGExtension(
        schema="public",
        signature="hstore"
    )
    op.drop_entity(public_hstore)

    public_alembic_version_pirene_insert = PGGrantTable(schema='public', table='alembic_version', columns=['version_num'], role='pirene', grant='INSERT', with_grant_option=False)
    op.drop_entity(public_alembic_version_pirene_insert)

    public_alembic_version_pirene_select = PGGrantTable(schema='public', table='alembic_version', columns=['version_num'], role='pirene', grant='SELECT', with_grant_option=False)
    op.drop_entity(public_alembic_version_pirene_select)

    public_alembic_version_pirene_update = PGGrantTable(schema='public', table='alembic_version', columns=['version_num'], role='pirene', grant='UPDATE', with_grant_option=False)
    op.drop_entity(public_alembic_version_pirene_update)

    public_audit_log_pirene_insert = PGGrantTable(schema='public', table='audit_log', columns=['created_at', 'height', 'id', 'notes', 'service'], role='pirene', grant='INSERT', with_grant_option=False)
    op.drop_entity(public_audit_log_pirene_insert)

    public_audit_log_pirene_select = PGGrantTable(schema='public', table='audit_log', columns=['created_at', 'height', 'id', 'notes', 'service'], role='pirene', grant='SELECT', with_grant_option=False)
    op.drop_entity(public_audit_log_pirene_select)

    public_audit_log_pirene_update = PGGrantTable(schema='public', table='audit_log', columns=['created_at', 'height', 'id', 'notes', 'service'], role='pirene', grant='UPDATE', with_grant_option=False)
    op.drop_entity(public_audit_log_pirene_update)

    public_boxes_pirene_insert = PGGrantTable(schema='public', table='boxes', columns=['box_id', 'height', 'id', 'is_unspent', 'nerg'], role='pirene', grant='INSERT', with_grant_option=False)
    op.drop_entity(public_boxes_pirene_insert)

    public_boxes_pirene_select = PGGrantTable(schema='public', table='boxes', columns=['box_id', 'height', 'id', 'is_unspent', 'nerg'], role='pirene', grant='SELECT', with_grant_option=False)
    op.drop_entity(public_boxes_pirene_select)

    public_boxes_pirene_update = PGGrantTable(schema='public', table='boxes', columns=['box_id', 'height', 'id', 'is_unspent', 'nerg'], role='pirene', grant='UPDATE', with_grant_option=False)
    op.drop_entity(public_boxes_pirene_update)

    public_prices_pirene_insert = PGGrantTable(schema='public', table='prices', columns=['id', 'price', 'token_id'], role='pirene', grant='INSERT', with_grant_option=False)
    op.drop_entity(public_prices_pirene_insert)

    public_prices_pirene_select = PGGrantTable(schema='public', table='prices', columns=['id', 'price', 'token_id'], role='pirene', grant='SELECT', with_grant_option=False)
    op.drop_entity(public_prices_pirene_select)

    public_prices_pirene_update = PGGrantTable(schema='public', table='prices', columns=['id', 'price', 'token_id'], role='pirene', grant='UPDATE', with_grant_option=False)
    op.drop_entity(public_prices_pirene_update)

    public_tokens_pirene_insert = PGGrantTable(schema='public', table='tokens', columns=['amount', 'decimals', 'height', 'id', 'token_id', 'token_name', 'token_price', 'token_type'], role='pirene', grant='INSERT', with_grant_option=False)
    op.drop_entity(public_tokens_pirene_insert)

    public_tokens_pirene_select = PGGrantTable(schema='public', table='tokens', columns=['amount', 'decimals', 'height', 'id', 'token_id', 'token_name', 'token_price', 'token_type'], role='pirene', grant='SELECT', with_grant_option=False)
    op.drop_entity(public_tokens_pirene_select)

    public_tokens_pirene_update = PGGrantTable(schema='public', table='tokens', columns=['amount', 'decimals', 'height', 'id', 'token_id', 'token_name', 'token_price', 'token_type'], role='pirene', grant='UPDATE', with_grant_option=False)
    op.drop_entity(public_tokens_pirene_update)

    public_utxos_pirene_insert = PGGrantTable(schema='public', table='utxos', columns=['address', 'assets', 'box_id', 'creation_height', 'ergo_tree', 'height', 'id', 'nergs', 'registers', 'transaction_id'], role='pirene', grant='INSERT', with_grant_option=False)
    op.drop_entity(public_utxos_pirene_insert)

    public_utxos_pirene_select = PGGrantTable(schema='public', table='utxos', columns=['address', 'assets', 'box_id', 'creation_height', 'ergo_tree', 'height', 'id', 'nergs', 'registers', 'transaction_id'], role='pirene', grant='SELECT', with_grant_option=False)
    op.drop_entity(public_utxos_pirene_select)

    public_utxos_pirene_update = PGGrantTable(schema='public', table='utxos', columns=['address', 'assets', 'box_id', 'creation_height', 'ergo_tree', 'height', 'id', 'nergs', 'registers', 'transaction_id'], role='pirene', grant='UPDATE', with_grant_option=False)
    op.drop_entity(public_utxos_pirene_update)

    public_alembic_version_pirene_delete = PGGrantTable(schema='public', table='alembic_version', columns=[], role='pirene', grant='DELETE', with_grant_option=False)
    op.drop_entity(public_alembic_version_pirene_delete)

    public_tokens_pirene_delete = PGGrantTable(schema='public', table='tokens', columns=[], role='pirene', grant='DELETE', with_grant_option=False)
    op.drop_entity(public_tokens_pirene_delete)

    public_boxes_pirene_delete = PGGrantTable(schema='public', table='boxes', columns=[], role='pirene', grant='DELETE', with_grant_option=False)
    op.drop_entity(public_boxes_pirene_delete)

    public_prices_pirene_delete = PGGrantTable(schema='public', table='prices', columns=[], role='pirene', grant='DELETE', with_grant_option=False)
    op.drop_entity(public_prices_pirene_delete)

    public_utxos_pirene_delete = PGGrantTable(schema='public', table='utxos', columns=[], role='pirene', grant='DELETE', with_grant_option=False)
    op.drop_entity(public_utxos_pirene_delete)

    public_audit_log_pirene_delete = PGGrantTable(schema='public', table='audit_log', columns=[], role='pirene', grant='DELETE', with_grant_option=False)
    op.drop_entity(public_audit_log_pirene_delete)

    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    public_audit_log_pirene_delete = PGGrantTable(schema='public', table='audit_log', columns=[], role='pirene', grant='DELETE', with_grant_option=False)
    op.create_entity(public_audit_log_pirene_delete)

    public_utxos_pirene_delete = PGGrantTable(schema='public', table='utxos', columns=[], role='pirene', grant='DELETE', with_grant_option=False)
    op.create_entity(public_utxos_pirene_delete)

    public_prices_pirene_delete = PGGrantTable(schema='public', table='prices', columns=[], role='pirene', grant='DELETE', with_grant_option=False)
    op.create_entity(public_prices_pirene_delete)

    public_boxes_pirene_delete = PGGrantTable(schema='public', table='boxes', columns=[], role='pirene', grant='DELETE', with_grant_option=False)
    op.create_entity(public_boxes_pirene_delete)

    public_tokens_pirene_delete = PGGrantTable(schema='public', table='tokens', columns=[], role='pirene', grant='DELETE', with_grant_option=False)
    op.create_entity(public_tokens_pirene_delete)

    public_alembic_version_pirene_delete = PGGrantTable(schema='public', table='alembic_version', columns=[], role='pirene', grant='DELETE', with_grant_option=False)
    op.create_entity(public_alembic_version_pirene_delete)

    public_utxos_pirene_update = PGGrantTable(schema='public', table='utxos', columns=['address', 'assets', 'box_id', 'creation_height', 'ergo_tree', 'height', 'id', 'nergs', 'registers', 'transaction_id'], role='pirene', grant='UPDATE', with_grant_option=False)
    op.create_entity(public_utxos_pirene_update)

    public_utxos_pirene_select = PGGrantTable(schema='public', table='utxos', columns=['address', 'assets', 'box_id', 'creation_height', 'ergo_tree', 'height', 'id', 'nergs', 'registers', 'transaction_id'], role='pirene', grant='SELECT', with_grant_option=False)
    op.create_entity(public_utxos_pirene_select)

    public_utxos_pirene_insert = PGGrantTable(schema='public', table='utxos', columns=['address', 'assets', 'box_id', 'creation_height', 'ergo_tree', 'height', 'id', 'nergs', 'registers', 'transaction_id'], role='pirene', grant='INSERT', with_grant_option=False)
    op.create_entity(public_utxos_pirene_insert)

    public_tokens_pirene_update = PGGrantTable(schema='public', table='tokens', columns=['amount', 'decimals', 'height', 'id', 'token_id', 'token_name', 'token_price', 'token_type'], role='pirene', grant='UPDATE', with_grant_option=False)
    op.create_entity(public_tokens_pirene_update)

    public_tokens_pirene_select = PGGrantTable(schema='public', table='tokens', columns=['amount', 'decimals', 'height', 'id', 'token_id', 'token_name', 'token_price', 'token_type'], role='pirene', grant='SELECT', with_grant_option=False)
    op.create_entity(public_tokens_pirene_select)

    public_tokens_pirene_insert = PGGrantTable(schema='public', table='tokens', columns=['amount', 'decimals', 'height', 'id', 'token_id', 'token_name', 'token_price', 'token_type'], role='pirene', grant='INSERT', with_grant_option=False)
    op.create_entity(public_tokens_pirene_insert)

    public_prices_pirene_update = PGGrantTable(schema='public', table='prices', columns=['id', 'price', 'token_id'], role='pirene', grant='UPDATE', with_grant_option=False)
    op.create_entity(public_prices_pirene_update)

    public_prices_pirene_select = PGGrantTable(schema='public', table='prices', columns=['id', 'price', 'token_id'], role='pirene', grant='SELECT', with_grant_option=False)
    op.create_entity(public_prices_pirene_select)

    public_prices_pirene_insert = PGGrantTable(schema='public', table='prices', columns=['id', 'price', 'token_id'], role='pirene', grant='INSERT', with_grant_option=False)
    op.create_entity(public_prices_pirene_insert)

    public_boxes_pirene_update = PGGrantTable(schema='public', table='boxes', columns=['box_id', 'height', 'id', 'is_unspent', 'nerg'], role='pirene', grant='UPDATE', with_grant_option=False)
    op.create_entity(public_boxes_pirene_update)

    public_boxes_pirene_select = PGGrantTable(schema='public', table='boxes', columns=['box_id', 'height', 'id', 'is_unspent', 'nerg'], role='pirene', grant='SELECT', with_grant_option=False)
    op.create_entity(public_boxes_pirene_select)

    public_boxes_pirene_insert = PGGrantTable(schema='public', table='boxes', columns=['box_id', 'height', 'id', 'is_unspent', 'nerg'], role='pirene', grant='INSERT', with_grant_option=False)
    op.create_entity(public_boxes_pirene_insert)

    public_audit_log_pirene_update = PGGrantTable(schema='public', table='audit_log', columns=['created_at', 'height', 'id', 'notes', 'service'], role='pirene', grant='UPDATE', with_grant_option=False)
    op.create_entity(public_audit_log_pirene_update)

    public_audit_log_pirene_select = PGGrantTable(schema='public', table='audit_log', columns=['created_at', 'height', 'id', 'notes', 'service'], role='pirene', grant='SELECT', with_grant_option=False)
    op.create_entity(public_audit_log_pirene_select)

    public_audit_log_pirene_insert = PGGrantTable(schema='public', table='audit_log', columns=['created_at', 'height', 'id', 'notes', 'service'], role='pirene', grant='INSERT', with_grant_option=False)
    op.create_entity(public_audit_log_pirene_insert)

    public_alembic_version_pirene_update = PGGrantTable(schema='public', table='alembic_version', columns=['version_num'], role='pirene', grant='UPDATE', with_grant_option=False)
    op.create_entity(public_alembic_version_pirene_update)

    public_alembic_version_pirene_select = PGGrantTable(schema='public', table='alembic_version', columns=['version_num'], role='pirene', grant='SELECT', with_grant_option=False)
    op.create_entity(public_alembic_version_pirene_select)

    public_alembic_version_pirene_insert = PGGrantTable(schema='public', table='alembic_version', columns=['version_num'], role='pirene', grant='INSERT', with_grant_option=False)
    op.create_entity(public_alembic_version_pirene_insert)

    public_hstore = PGExtension(
        schema="public",
        signature="hstore"
    )
    op.create_entity(public_hstore)

    public_vesting = PGMaterializedView(
                schema="public",
                signature="vesting",
                definition='WITH v AS (\n         SELECT utxos.id,\n            utxos.ergo_tree,\n            utxos.box_id,\n            (utxos.registers -> \'R4\'::text) AS parameters,\n            "right"((utxos.registers -> \'R5\'::text), (length((utxos.registers -> \'R5\'::text)) - 4)) AS vesting_key_id,\n            ((each(utxos.assets)).key)::character varying(64) AS token_id,\n            (each(utxos.assets)).value AS remaining\n           FROM utxos\n          WHERE (utxos.ergo_tree = ANY (ARRAY[\'100e04020400040404000402040604000402040204000400040404000400d810d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605e4c6a70411d6069d99db6903db6503feb27205730200b27205730300d607b27205730400d608b27205730500d6099972087204d60a9592720672079972087209999d9c7206720872077209d60b937204720ad60c95720bb2a5730600b2a5730700d60ddb6308720cd60eb2720d730800d60f8c720301d610b2a5730900d1eded96830201aedb63087201d901114d0e938c721101720293c5b2a4730a00c5a79683050193c2720cc2720193b1720d730b938cb2720d730c00017202938c720e01720f938c720e02720aec720bd801d611b2db63087210730d009683060193c17210c1a793c27210c2a7938c721101720f938c721102997204720a93e4c67210050e720293e4c6721004117205\'::text, \'1012040204000404040004020406040c0408040a050004000402040204000400040404000400d812d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605db6903db6503fed606e4c6a70411d6079d997205b27206730200b27206730300d608b27206730400d609b27206730500d60a9972097204d60b95917205b272067306009d9c7209b27206730700b272067308007309d60c959272077208997209720a999a9d9c7207997209720b7208720b720ad60d937204720cd60e95720db2a5730a00b2a5730b00d60fdb6308720ed610b2720f730c00d6118c720301d612b2a5730d00d1eded96830201aedb63087201d901134d0e938c721301720293c5b2a4730e00c5a79683050193c2720ec2720193b1720f730f938cb2720f731000017202938c7210017211938c721002720cec720dd801d613b2db630872127311009683060193c17212c1a793c27212c2a7938c7213017211938c721302997204720c93e4c67212050e720293e4c6721204117206\'::text, \'10070400040204000500040004000400d80bd601e4c6a7040ed602b2db6308a7730000d6038c720201d604e4c6a70805d605e4c6a70705d606e4c6a70505d607e4c6a70605d6089c9d99db6903db6503fe720572067207d6098c720202d60a9972047209d60b958f99720472087207997204720a997208720ad1ed93b0b5a5d9010c63ededed93c2720c720193e4c6720c040ee4c6a7090e93b1db6308720c7301938cb2db6308720c7302000172037303d9010c41639a8c720c018cb2db63088c720c0273040002720bec937209720baea5d9010c63ededededededededed93c1720cc1a793c2720cc2a7938cb2db6308720c730500017203938cb2db6308720c73060002997209720b93e4c6720c040e720193e4c6720c0505720693e4c6720c0605720793e4c6720c0705720593e4c6720c0805720493e4c6720c090ee4c6a7090e\'::text, \'100e04020400040404000402040604000402040204000400040404000400d810d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605e4c6a70411d6069d99db6903db6503feb27205730200b27205730300d607b27205730400d608b27205730500d6099972087204d60a9592720672079972087209999d9c7206720872077209d60b937204720ad60c95720bb2a5730600b2a5730700d60ddb6308720cd60eb2720d730800d60f8c720301d610b2a5730900d1eded96830201aedb63087201d901114d0e938c721101720293c5b2a4730a00c5a79683050193c2720cc2720193b1720d730b938cb2720d730c00017202938c720e01720f938c720e02720aec720bd801d611b2db63087210730d009683060193c17210c1a793c27210c2a7938c721101720f938c721102997204720a93e4c67210050e720293e4c6721004117205\'::text]))\n        ), a AS (\n         SELECT utxos.address,\n            ((each(utxos.assets)).key)::character varying(64) AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount\n           FROM utxos\n          WHERE ((utxos.address)::text <> \'\'::text)\n        )\n SELECT v.box_id,\n    (v.vesting_key_id)::character varying(64) AS vesting_key_id,\n    (v.parameters)::character varying(1024) AS parameters,\n    v.token_id,\n    (v.remaining)::bigint AS remaining,\n    a.address,\n    v.ergo_tree\n   FROM (v\n     JOIN a ON (((a.token_id)::text = v.vesting_key_id)))',
                with_data=True
            )

    op.create_entity(public_vesting)

    public_unspent_by_token = PGMaterializedView(
                schema="public",
                signature="unspent_by_token",
                definition='SELECT DISTINCT (each(utxos.assets)).key AS token_id,\n    utxos.box_id\n   FROM utxos',
                with_data=True
            )

    op.create_entity(public_unspent_by_token)

    public_tokenomics_paideia = PGMaterializedView(
                schema="public",
                signature="tokenomics_paideia",
                definition='WITH assets AS (\n         SELECT (each(utxos.assets)).key AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount,\n            utxos.ergo_tree\n           FROM utxos\n        ), vested AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'100e04020400040404000402040604000402040204000400040404000400d810d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605e4c6a70411d6069d99db6903db6503feb27205730200b27205730300d607b27205730400d608b27205730500d6099972087204d60a9592720672079972087209999d9c7206720872077209d60b937204720ad60c95720bb2a5730600b2a5730700d60ddb6308720cd60eb2720d730800d60f8c720301d610b2a5730900d1eded96830201aedb63087201d901114d0e938c721101720293c5b2a4730a00c5a79683050193c2720cc2720193b1720d730b938cb2720d730c00017202938c720e01720f938c720e02720aec720bd801d611b2db63087210730d009683060193c17210c1a793c27210c2a7938c721101720f938c721102997204720a93e4c67210050e720293e4c6721004117205\'::text) AND (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text))\n        ), emitted AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.ergo_tree = \'102d04000e201fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad48904000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504040404040604020400040204040402050004020400040004020402040404040400040004000402040004000e201028de73d018f0c9a374b71555c5b8f1390994f2f41633e7b9d68f77735782ee040004020100040604000500040204000400040204020400040204020404040404060100d802d601b2a4730000d602730195ed938cb2db6308720173020001730393c5b2a4730400c5a7d80ad603b2a5730500d604e4c672030411d605e4c672010411d606b27204730600d607b2a4730700d608b2e4c672070411730800d609db6308a7d60a9a8cb2db63087207730900029592b17209730a8cb27209730b0002730cd60bdb63087203d60cb2720b730d00d19683080193c27203c2a793b27204730e00b27205730f0093b27204731000b2720573110093b27204731200b27205731300937206958f7208720a7208720a938cb2720b731400018cb2720973150001938c720c017202938c720c0272069593c57201c5a7d80ad603b2a5731600d604db63087203d605db6308a7d6068cb2720573170002d607b5a4d9010763d801d609db630872079591b172097318ed938cb2720973190001731a93b2e4c672070411731b00b2e4c6a70411731c00731dd608e4c6a70411d609b27208731e00d60ab27208731f00d60bb072077320d9010b41639a8c720b019d9c8cb2db63088c720b02732100027209720ad60ce4c672030411d19683070193c27203c2a7938cb27204732200018cb272057323000195907206720b93b172047324d801d60db27204732500ed938c720d017202928c720d02997206720b93b2720c732600720a93b2720c732700b2720873280093b2720c73290099b27208732a007eb172070593b2720c732b007209d1732c\'::text)\n        ), staked AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'101f040004000e2012bbef36eaa5e61b64d519196a1e8ebea360f18aba9b02d2a21b16f26208960f040204000400040001000e20b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f0910402040004000402040204000400050204020402040604000100040404020402010001010100040201000100d807d601b2a4730000d6028cb2db6308720173010001d6039372027302d604e4c6a70411d605e4c6a7050ed60695ef7203ed93c5b2a4730300c5a78fb2e4c6b2a57304000411730500b2e4c6720104117306007307d6079372027308d1ecec957203d80ad608b2a5dc0c1aa402a7730900d609e4c672080411d60adb63087208d60bb2720a730a00d60cdb6308a7d60db2720c730b00d60eb2720a730c00d60fb2720c730d00d6107e8c720f0206d611e4c6720104119683090193c17208c1a793c27208c2a793b27209730e009ab27204730f00731093e4c67208050e720593b27209731100b27204731200938c720b018c720d01938c720b028c720d02938c720e018c720f01937e8c720e02069a72109d9c7eb272117313000672107eb27211731400067315957206d801d608b2a5731600ed72079593c27208c2a7d801d609c67208050e95e67209ed93e472097205938cb2db6308b2a57317007318000172057319731a731b9595efec7206720393c5b2a4731c00c5a7731d7207731e\'::text) AND (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text))\n        ), stake_pool AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'1014040004000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402040204040404040205000400040004000402040204000400040004000100d801d601b2a473000095ed938cb2db6308720173010001730293c5b2a4730300c5a7d808d602b2a5730400d603db63087202d604db6308a7d605b27204730500d606db6308b2a4730600d6079592b1720673078cb27206730800027309d6089a8c7205027207d609b2e4c6a70411730a00d19683050193c27202c2a7938cb27203730b00018cb27204730c0001959172087209d801d60ab27203730d00ed938c720a018c720501938c720a02997208720993b17203730e93b2e4c672020411730f00720993b2e4c6b2a57310000411731100999ab2e4c67201041173120072097207d17313\'::text) AND (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text))\n        ), supply AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text)\n          GROUP BY assets.token_id\n        ), vals AS (\n         SELECT ( SELECT COALESCE(vested.amount, (0)::numeric) AS "coalesce"\n                   FROM vested) AS vested,\n            ( SELECT COALESCE(staked.amount, (0)::numeric) AS "coalesce"\n                   FROM staked) AS staked,\n            ( SELECT COALESCE(emitted.amount, (0)::numeric) AS "coalesce"\n                   FROM emitted) AS emitted,\n            ( SELECT COALESCE(stake_pool.amount, (0)::numeric) AS "coalesce"\n                   FROM stake_pool) AS stake_pool,\n            ( SELECT COALESCE(supply.amount, (0)::numeric) AS "coalesce"\n                   FROM supply) AS supply\n        )\n SELECT \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text AS token_id,\n    t.decimals,\n    t.token_price,\n    v.vested,\n    v.staked,\n    v.emitted,\n    v.stake_pool,\n    v.supply,\n    (((v.supply - v.vested) - v.emitted) - v.stake_pool) AS in_circulation,\n    (((v.vested)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS vested_actual,\n    (((v.staked)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS staked_actual,\n    (((v.emitted)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS emitted_actual,\n    (((v.stake_pool)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS stake_pool_actual,\n    (((v.supply)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS supply_actual,\n    (((((v.supply - v.vested) - v.emitted) - v.stake_pool) / (t.decimals)::numeric))::numeric(32,2) AS in_circulation_actual\n   FROM (vals v\n     JOIN tokens t ON (((t.token_id)::text = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text)))',
                with_data=True
            )

    op.create_entity(public_tokenomics_paideia)

    public_tokenomics_neta = PGMaterializedView(
                schema="public",
                signature="tokenomics_neta",
                definition='WITH assets AS (\n         SELECT (each(utxos.assets)).key AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount,\n            utxos.ergo_tree\n           FROM utxos\n        ), vested AS (\n         SELECT 0 AS amount\n        ), emitted AS (\n         SELECT 0 AS amount\n        ), staked AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'101b0400040004020e209e5e5e0a3abbaeaf0e54e1e2ca4a6a96c9b7151dd6d7ddaf738be2f99a54dc2b04020e203f38af5d8ce0549390feb2e1a0cd614c865d7578425683bcdb0101630e1a66d4040204000400040204000400050204020402040604000100040004000400040401000402040201010100d809d601b2a4730000d6028cb2db6308720173010001d603e4c6a70411d604e4c6a7050ed605db6308a7d606b27205730200d6077e8c72060206d6089372027303d60993c5b2a4730400c5a7d1ecec959372027305d807d60ab2a5dc0c1aa402a7730600d60be4c6720a0411d60cdb6308720ad60db2720c730700d60eb27205730800d60fb2720c730900d610e4c6720104119683090193c1720ac1a793c2720ac2a793b2720b730a009ab27203730b00730c93b2720b730d00b27203730e0093e4c6720a050e7204938c720d018c720e01938c720d028c720e02938c720f018c720601937e8c720f02069a72079d9c7eb27210730f000672077eb272107310000673119596830301720872098fb2e4c6b2a57312000411731300b2e4c672010411731400d801d60ab2a57315009593c2720ac2a7d801d60bc6720a050e9683020195e6720b93e4720b72047316938cb2db6308b2a57317007318000172047319731a9683020172087209\'::text) AND (assets.token_id = \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text))\n        ), stake_pool AS (\n         SELECT 0 AS amount\n        ), supply AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.token_id = \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text)\n          GROUP BY assets.token_id\n        ), vals AS (\n         SELECT ( SELECT COALESCE(vested.amount, 0) AS "coalesce"\n                   FROM vested) AS vested,\n            ( SELECT COALESCE(staked.amount, (0)::numeric) AS "coalesce"\n                   FROM staked) AS staked,\n            ( SELECT COALESCE(emitted.amount, 0) AS "coalesce"\n                   FROM emitted) AS emitted,\n            ( SELECT COALESCE(stake_pool.amount, 0) AS "coalesce"\n                   FROM stake_pool) AS stake_pool,\n            ( SELECT COALESCE(supply.amount, (0)::numeric) AS "coalesce"\n                   FROM supply) AS supply\n        )\n SELECT \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text AS token_id,\n    t.decimals,\n    t.token_price,\n    v.vested,\n    v.staked,\n    v.emitted,\n    v.stake_pool,\n    v.supply,\n    (((v.supply - (v.vested)::numeric) - (v.emitted)::numeric) - (v.stake_pool)::numeric) AS in_circulation,\n    (((v.vested)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS vested_actual,\n    (((v.staked)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS staked_actual,\n    (((v.emitted)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS emitted_actual,\n    (((v.stake_pool)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS stake_pool_actual,\n    (((v.supply)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS supply_actual,\n    (((((v.supply - (v.vested)::numeric) - (v.emitted)::numeric) - (v.stake_pool)::numeric) / (t.decimals)::numeric))::numeric(32,2) AS in_circulation_actual\n   FROM (vals v\n     JOIN tokens t ON (((t.token_id)::text = \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text)))',
                with_data=True
            )

    op.create_entity(public_tokenomics_neta)

    public_tokenomics_ergopad = PGMaterializedView(
                schema="public",
                signature="tokenomics_ergopad",
                definition="WITH assets AS (\n         SELECT (each(utxos.assets)).key AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount,\n            utxos.ergo_tree\n           FROM utxos\n        ), vested AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.ergo_tree = '10070400040204000500040004000400d80bd601e4c6a7040ed602b2db6308a7730000d6038c720201d604e4c6a70805d605e4c6a70705d606e4c6a70505d607e4c6a70605d6089c9d99db6903db6503fe720572067207d6098c720202d60a9972047209d60b958f99720472087207997204720a997208720ad1ed93b0b5a5d9010c63ededed93c2720c720193e4c6720c040ee4c6a7090e93b1db6308720c7301938cb2db6308720c7302000172037303d9010c41639a8c720c018cb2db63088c720c0273040002720bec937209720baea5d9010c63ededededededededed93c1720cc1a793c2720cc2a7938cb2db6308720c730500017203938cb2db6308720c73060002997209720b93e4c6720c040e720193e4c6720c0505720693e4c6720c0605720793e4c6720c0705720593e4c6720c0805720493e4c6720c090ee4c6a7090e'::text)\n        ), emitted AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.ergo_tree = '102d04000e20d71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de41304000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504040404040604020400040204040402050004020400040004020402040404040400040004000402040004000e201028de73d018f0c9a374b71555c5b8f1390994f2f41633e7b9d68f77735782ee040004020100040604000500040204000400040204020400040204020404040404060100d802d601b2a4730000d602730195ed938cb2db6308720173020001730393c5b2a4730400c5a7d80ad603b2a5730500d604e4c672030411d605e4c672010411d606b27204730600d607b2a4730700d608b2e4c672070411730800d609db6308a7d60a9a8cb2db63087207730900029592b17209730a8cb27209730b0002730cd60bdb63087203d60cb2720b730d00d19683080193c27203c2a793b27204730e00b27205730f0093b27204731000b2720573110093b27204731200b27205731300937206958f7208720a7208720a938cb2720b731400018cb2720973150001938c720c017202938c720c0272069593c57201c5a7d80ad603b2a5731600d604db63087203d605db6308a7d6068cb2720573170002d607b5a4d9010763d801d609db630872079591b172097318ed938cb2720973190001731a93b2e4c672070411731b00b2e4c6a70411731c00731dd608e4c6a70411d609b27208731e00d60ab27208731f00d60bb072077320d9010b41639a8c720b019d9c8cb2db63088c720b02732100027209720ad60ce4c672030411d19683070193c27203c2a7938cb27204732200018cb272057323000195907206720b93b172047324d801d60db27204732500ed938c720d017202928c720d02997206720b93b2720c732600720a93b2720c732700b2720873280093b2720c73290099b27208732a007eb172070593b2720c732b007209d1732c'::text)\n        ), staked AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = '1017040004000e200549ea3374a36b7a22a803766af732e61798463c3332c5f6d86c8ab9195eed59040204000400040204020400040005020402040204060400040204040e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402010001010100d802d601b2a4730000d6028cb2db6308720173010001959372027302d80bd603b2a5dc0c1aa402a7730300d604e4c672030411d605e4c6a70411d606db63087203d607b27206730400d608db6308a7d609b27208730500d60ab27206730600d60bb27208730700d60c8c720b02d60de4c672010411d19683090193c17203c1a793c27203c2a793b272047308009ab27205730900730a93e4c67203050ee4c6a7050e93b27204730b00b27205730c00938c7207018c720901938c7207028c720902938c720a018c720b01938c720a029a720c9d9cb2720d730d00720cb2720d730e00d801d603b2a4730f009593c57203c5a7d801d604b2a5731000d1ed93720273119593c27204c2a7d801d605c67204050e95e67205ed93e47205e4c6a7050e938cb2db6308b2a573120073130001e4c67203050e73147315d17316'::text) AND (assets.token_id = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text))\n        ), stake_pool AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = '1014040004000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402040204040404040205000400040004000402040204000400040004000100d801d601b2a473000095ed938cb2db6308720173010001730293c5b2a4730300c5a7d808d602b2a5730400d603db63087202d604db6308a7d605b27204730500d606db6308b2a4730600d6079592b1720673078cb27206730800027309d6089a8c7205027207d609b2e4c6a70411730a00d19683050193c27202c2a7938cb27203730b00018cb27204730c0001959172087209d801d60ab27203730d00ed938c720a018c720501938c720a02997208720993b17203730e93b2e4c672020411730f00720993b2e4c6b2a57310000411731100999ab2e4c67201041173120072097207d17313'::text) AND (assets.token_id = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text))\n        ), supply AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.token_id = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text)\n          GROUP BY assets.token_id\n        ), vals AS (\n         SELECT ( SELECT vested.amount\n                   FROM vested) AS vested,\n            ( SELECT staked.amount\n                   FROM staked) AS staked,\n            ( SELECT emitted.amount\n                   FROM emitted) AS emitted,\n            ( SELECT stake_pool.amount\n                   FROM stake_pool) AS stake_pool,\n            ( SELECT supply.amount\n                   FROM supply) AS supply\n        )\n SELECT 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text AS token_id,\n    t.decimals,\n    t.token_price,\n    COALESCE(v.vested, 0.0) AS vested,\n    v.staked,\n    v.emitted,\n    v.stake_pool,\n    v.supply,\n    (((v.supply - COALESCE(v.vested, 0.0)) - v.emitted) - v.stake_pool) AS in_circulation,\n    (((COALESCE(v.vested, 0.0))::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS vested_actual,\n    (((v.staked)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS staked_actual,\n    (((v.emitted)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS emitted_actual,\n    (((v.stake_pool)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS stake_pool_actual,\n    (((v.supply)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS supply_actual,\n    (((((v.supply - COALESCE(v.vested, 0.0)) - v.emitted) - v.stake_pool) / (t.decimals)::numeric))::numeric(32,2) AS in_circulation_actual\n   FROM (vals v\n     JOIN tokens t ON (((t.token_id)::text = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text)))",
                with_data=True
            )

    op.create_entity(public_tokenomics_ergopad)

    public_token_status = PGMaterializedView(
                schema="public",
                signature="token_status",
                definition="WITH paideia_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? 'b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f091'::text)\n         LIMIT 1\n        ), paideia_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '93cda90b4fe24f075d7961fa0d1d662fdc7e1349d313059b9618eecb16c5eade'::text)\n         LIMIT 1\n        ), ergopad_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '05cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f3125'::text)\n         LIMIT 1\n        ), ergopad_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '0d01f2f0b3254b4a1731e1b61ad77641fe54de2bd68d1c6fc1ae4e7e9ddfb212'::text)\n         LIMIT 1\n        ), egio_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? 'f419099a27aaa5f6f7d109d8773b1862e8d1857b44aa7d86395940d41eb53806'::text)\n         LIMIT 1\n        ), egio_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '07a8648d0de0f7c87aad41a1fbc6d393a6ad95584d38c47c88125bef101c29e9'::text)\n         LIMIT 1\n        ), egiov2_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '097fd281c99588269d672e1b686bf6bcdce04102e183b2242f6634d93869fc0a'::text)\n         LIMIT 1\n        ), egiov2_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? 'dc22db903e5ac54da5d4b6f33dd13b2330b79a9ae473f9dd3ea0d796c1179443'::text)\n         LIMIT 1\n        ), neta_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '9e5e5e0a3abbaeaf0e54e1e2ca4a6a96c9b7151dd6d7ddaf738be2f99a54dc2b'::text)\n         LIMIT 1\n        ), neta_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '8a4f19b27efeaa328e9ba03f0752253713e6b477cdb9ea7d5e8857e671c48e60'::text)\n         LIMIT 1\n        )\n SELECT 'paideia'::text AS token_name,\n    paideia_st.r4 AS str4,\n    paideia_pl.r4 AS plr4,\n    4 AS dcml\n   FROM paideia_st,\n    paideia_pl\nUNION\n SELECT 'ergopad'::text AS token_name,\n    ergopad_st.r4 AS str4,\n    ergopad_pl.r4 AS plr4,\n    2 AS dcml\n   FROM ergopad_st,\n    ergopad_pl\nUNION\n SELECT 'egio'::text AS token_name,\n    egio_st.r4 AS str4,\n    egio_pl.r4 AS plr4,\n    4 AS dcml\n   FROM egio_st,\n    egio_pl\nUNION\n SELECT 'egiov2'::text AS token_name,\n    egiov2_st.r4 AS str4,\n    egiov2_pl.r4 AS plr4,\n    4 AS dcml\n   FROM egiov2_st,\n    egiov2_pl\nUNION\n SELECT 'neta'::text AS token_name,\n    neta_st.r4 AS str4,\n    neta_pl.r4 AS plr4,\n    6 AS dcml\n   FROM neta_st,\n    neta_pl",
                with_data=True
            )

    op.create_entity(public_token_status)

    public_token_locked = PGMaterializedView(
                schema="public",
                signature="token_locked",
                definition="WITH adr AS (\n         SELECT u_1.address,\n            u_1.id,\n            ((each(u_1.assets)).key)::character varying(64) AS token_id,\n            ((each(u_1.assets)).value)::bigint AS amount\n           FROM utxos u_1\n          WHERE ((u_1.address)::text <> ''::text)\n        )\n SELECT adr.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty\n   FROM (token_staked u\n     JOIN adr ON (((adr.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)",
                with_data=True
            )

    op.create_entity(public_token_locked)

    public_balances = PGMaterializedView(
                schema="public",
                signature="balances",
                definition="SELECT utxos.address,\n    sum(utxos.nergs) AS nergs\n   FROM utxos\n  WHERE ((utxos.address)::text <> ''::text)\n  GROUP BY utxos.address",
                with_data=True
            )

    op.create_entity(public_balances)

    public_tokenomics_egio = PGMaterializedView(
                schema="public",
                signature="tokenomics_egio",
                definition='WITH assets AS (\n         SELECT (each(utxos.assets)).key AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount,\n            utxos.ergo_tree\n           FROM utxos\n        ), vested AS (\n         SELECT 0 AS amount\n        ), emitted AS (\n         SELECT 0 AS amount\n        ), staked AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'101b0400040004020e20097fd281c99588269d672e1b686bf6bcdce04102e183b2242f6634d93869fc0a04020e200e4202196f6030ab1986e39012dc95ea10f034b13d90a70c0b1f86d986106ff6040204000400040204000400050204020402040604000100040004000400040401000402040201010100d809d601b2a4730000d6028cb2db6308720173010001d603e4c6a70411d604e4c6a7050ed605db6308a7d606b27205730200d6077e8c72060206d6089372027303d60993c5b2a4730400c5a7d1ecec959372027305d807d60ab2a5dc0c1aa402a7730600d60be4c6720a0411d60cdb6308720ad60db2720c730700d60eb27205730800d60fb2720c730900d610e4c6720104119683090193c1720ac1a793c2720ac2a793b2720b730a009ab27203730b00730c93b2720b730d00b27203730e0093e4c6720a050e7204938c720d018c720e01938c720d028c720e02938c720f018c720601937e8c720f02069a72079d9c7eb27210730f000672077eb272107310000673119596830301720872098fb2e4c6b2a57312000411731300b2e4c672010411731400d801d60ab2a57315009593c2720ac2a7d801d60bc6720a050e9683020195e6720b93e4720b72047316938cb2db6308b2a57317007318000172047319731a9683020172087209\'::text) AND (assets.token_id = \'00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3\'::text))\n        ), stake_pool AS (\n         SELECT 0 AS amount\n        ), supply AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.token_id = \'00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3\'::text)\n          GROUP BY assets.token_id\n        ), vals AS (\n         SELECT ( SELECT COALESCE(vested.amount, 0) AS "coalesce"\n                   FROM vested) AS vested,\n            ( SELECT COALESCE(staked.amount, (0)::numeric) AS "coalesce"\n                   FROM staked) AS staked,\n            ( SELECT COALESCE(emitted.amount, 0) AS "coalesce"\n                   FROM emitted) AS emitted,\n            ( SELECT COALESCE(stake_pool.amount, 0) AS "coalesce"\n                   FROM stake_pool) AS stake_pool,\n            ( SELECT COALESCE(supply.amount, (0)::numeric) AS "coalesce"\n                   FROM supply) AS supply\n        )\n SELECT \'00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3\'::text AS token_id,\n    t.decimals,\n    t.token_price,\n    v.vested,\n    v.staked,\n    v.emitted,\n    v.stake_pool,\n    v.supply,\n    (((v.supply - (v.vested)::numeric) - (v.emitted)::numeric) - (v.stake_pool)::numeric) AS in_circulation,\n    (((v.vested)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS vested_actual,\n    (((v.staked)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS staked_actual,\n    (((v.emitted)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS emitted_actual,\n    (((v.stake_pool)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS stake_pool_actual,\n    (((v.supply)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS supply_actual,\n    (((((v.supply - (v.vested)::numeric) - (v.emitted)::numeric) - (v.stake_pool)::numeric) / (t.decimals)::numeric))::numeric(32,2) AS in_circulation_actual\n   FROM (vals v\n     JOIN tokens t ON (((t.token_id)::text = \'00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3\'::text)))',
                with_data=True
            )

    op.create_entity(public_tokenomics_egio)

    public_staking = PGMaterializedView(
                schema="public",
                signature="staking",
                definition="WITH ergopad AS (\n         SELECT 'ergopad'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text))::bigint AS amount,\n            ((u.assets -> '1028de73d018f0c9a374b71555c5b8f1390994f2f41633e7b9d68f77735782ee'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text)))\n          WHERE (u.ergo_tree = '1017040004000e200549ea3374a36b7a22a803766af732e61798463c3332c5f6d86c8ab9195eed59040204000400040204020400040005020402040204060400040204040e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402010001010100d802d601b2a4730000d6028cb2db6308720173010001959372027302d80bd603b2a5dc0c1aa402a7730300d604e4c672030411d605e4c6a70411d606db63087203d607b27206730400d608db6308a7d609b27208730500d60ab27206730600d60bb27208730700d60c8c720b02d60de4c672010411d19683090193c17203c1a793c27203c2a793b272047308009ab27205730900730a93e4c67203050ee4c6a7050e93b27204730b00b27205730c00938c7207018c720901938c7207028c720902938c720a018c720b01938c720a029a720c9d9cb2720d730d00720cb2720d730e00d801d603b2a4730f009593c57203c5a7d801d604b2a5731000d1ed93720273119593c27204c2a7d801d605c67204050e95e67205ed93e47205e4c6a7050e938cb2db6308b2a573120073130001e4c67203050e73147315d17316'::text)\n        ), paideia AS (\n         SELECT 'paideia'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489'::text))::bigint AS amount,\n            ((u.assets -> '245957934c20285ada547aa8f2c8e6f7637be86a1985b3e4c36e4e1ad8ce97ab'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489'::text)))\n          WHERE (u.ergo_tree = '101f040004000e2012bbef36eaa5e61b64d519196a1e8ebea360f18aba9b02d2a21b16f26208960f040204000400040001000e20b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f0910402040004000402040204000400050204020402040604000100040404020402010001010100040201000100d807d601b2a4730000d6028cb2db6308720173010001d6039372027302d604e4c6a70411d605e4c6a7050ed60695ef7203ed93c5b2a4730300c5a78fb2e4c6b2a57304000411730500b2e4c6720104117306007307d6079372027308d1ecec957203d80ad608b2a5dc0c1aa402a7730900d609e4c672080411d60adb63087208d60bb2720a730a00d60cdb6308a7d60db2720c730b00d60eb2720a730c00d60fb2720c730d00d6107e8c720f0206d611e4c6720104119683090193c17208c1a793c27208c2a793b27209730e009ab27204730f00731093e4c67208050e720593b27209731100b27204731200938c720b018c720d01938c720b028c720d02938c720e018c720f01937e8c720e02069a72109d9c7eb272117313000672107eb27211731400067315957206d801d608b2a5731600ed72079593c27208c2a7d801d609c67208050e95e67209ed93e472097205938cb2db6308b2a57317007318000172057319731a731b9595efec7206720393c5b2a4731c00c5a7731d7207731e'::text)\n        ), egio AS (\n         SELECT 'egio'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text))::bigint AS amount,\n            ((u.assets -> '012d649686deeef606d253146bec0cf623f9b84574fbfa0fd0d1091393923613'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text)))\n          WHERE (u.ergo_tree = '1017040004000e20a8d633dee705ff90e3181013381455353dac2d91366952209ac6b3f9cdcc23e9040204000400040204020400040005020402040204060400040204040e20f419099a27aaa5f6f7d109d8773b1862e8d1857b44aa7d86395940d41eb5380604020402010001010100d802d601b2a4730000d6028cb2db6308720173010001959372027302d80bd603b2a5dc0c1aa402a7730300d604e4c672030411d605e4c6a70411d606db63087203d607b27206730400d608db6308a7d609b27208730500d60ab27206730600d60bb27208730700d60c8c720b02d60de4c672010411d19683090193c17203c1a793c27203c2a793b272047308009ab27205730900730a93e4c67203050ee4c6a7050e93b27204730b00b27205730c00938c7207018c720901938c7207028c720902938c720a018c720b01938c720a029a720c9d9cb2720d730d00720cb2720d730e00d801d603b2a4730f009593c57203c5a7d801d604b2a5731000d1ed93720273119593c27204c2a7d801d605c67204050e95e67205ed93e47205e4c6a7050e938cb2db6308b2a573120073130001e4c67203050e73147315d17316'::text)\n        ), egiov2 AS (\n         SELECT 'egiov2'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text))::bigint AS amount,\n            ((u.assets -> '012d649686deeef606d253146bec0cf623f9b84574fbfa0fd0d1091393923613'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text)))\n          WHERE (u.ergo_tree = '101b0400040004020e20097fd281c99588269d672e1b686bf6bcdce04102e183b2242f6634d93869fc0a04020e200e4202196f6030ab1986e39012dc95ea10f034b13d90a70c0b1f86d986106ff6040204000400040204000400050204020402040604000100040004000400040401000402040201010100d809d601b2a4730000d6028cb2db6308720173010001d603e4c6a70411d604e4c6a7050ed605db6308a7d606b27205730200d6077e8c72060206d6089372027303d60993c5b2a4730400c5a7d1ecec959372027305d807d60ab2a5dc0c1aa402a7730600d60be4c6720a0411d60cdb6308720ad60db2720c730700d60eb27205730800d60fb2720c730900d610e4c6720104119683090193c1720ac1a793c2720ac2a793b2720b730a009ab27203730b00730c93b2720b730d00b27203730e0093e4c6720a050e7204938c720d018c720e01938c720d028c720e02938c720f018c720601937e8c720f02069a72079d9c7eb27210730f000672077eb272107310000673119596830301720872098fb2e4c6b2a57312000411731300b2e4c672010411731400d801d60ab2a57315009593c2720ac2a7d801d60bc6720a050e9683020195e6720b93e4720b72047316938cb2db6308b2a57317007318000172047319731a9683020172087209'::text)\n        ), neta AS (\n         SELECT 'neta'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8'::text))::bigint AS amount,\n            ((u.assets -> 'a94787d05eefbd1b773b62812123b91c40553bd5ed7f3092ae66dba3f812e0c0'::text))::bigint AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id,\n            u.assets\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8'::text)))\n          WHERE (u.ergo_tree = '101b0400040004020e209e5e5e0a3abbaeaf0e54e1e2ca4a6a96c9b7151dd6d7ddaf738be2f99a54dc2b04020e203f38af5d8ce0549390feb2e1a0cd614c865d7578425683bcdb0101630e1a66d4040204000400040204000400050204020402040604000100040004000400040401000402040201010100d809d601b2a4730000d6028cb2db6308720173010001d603e4c6a70411d604e4c6a7050ed605db6308a7d606b27205730200d6077e8c72060206d6089372027303d60993c5b2a4730400c5a7d1ecec959372027305d807d60ab2a5dc0c1aa402a7730600d60be4c6720a0411d60cdb6308720ad60db2720c730700d60eb27205730800d60fb2720c730900d610e4c6720104119683090193c1720ac1a793c2720ac2a793b2720b730a009ab27203730b00730c93b2720b730d00b27203730e0093e4c6720a050e7204938c720d018c720e01938c720d028c720e02938c720f018c720601937e8c720f02069a72079d9c7eb27210730f000672077eb272107310000673119596830301720872098fb2e4c6b2a57312000411731300b2e4c672010411731400d801d60ab2a57315009593c2720ac2a7d801d60bc6720a050e9683020195e6720b93e4720b72047316938cb2db6308b2a57317007318000172047319731a9683020172087209'::text)\n        ), a AS (\n         SELECT utxos.address,\n            utxos.id,\n            ((each(utxos.assets)).key)::character varying(64) AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount\n           FROM utxos\n        )\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (ergopad u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (paideia u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (egio u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (egiov2 u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (neta u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)",
                with_data=True
            )

    op.create_entity(public_staking)

    public_registers_by_token = PGMaterializedView(
                schema="public",
                signature="registers_by_token",
                definition='WITH ep AS (\n         SELECT utxos.box_id,\n            skeys(utxos.assets) AS token_id\n           FROM utxos\n        )\n SELECT u.box_id,\n    ep.token_id,\n    (u.assets -> ep.token_id) AS amount,\n    hstore_to_json(u.registers) AS registers\n   FROM (utxos u\n     JOIN ep ON (((ep.box_id)::text = (u.box_id)::text)))',
                with_data=True
            )

    op.create_entity(public_registers_by_token)

    public_audit_stats = PGMaterializedView(
                schema="public",
                signature="audit_stats",
                definition='WITH ss AS (\n         SELECT audit_log.created_at,\n            lag(audit_log.created_at) OVER (ORDER BY audit_log.created_at) AS prev,\n            audit_log.height,\n            audit_log.service\n           FROM audit_log\n        )\n SELECT max(ss.height) AS max_height,\n    avg((ss.created_at - ss.prev)) AS avg_block,\n    count(*) AS block_count,\n    ss.service\n   FROM ss\n  WHERE (ss.created_at IS NOT NULL)\n  GROUP BY ss.service',
                with_data=True
            )

    op.create_entity(public_audit_stats)

    public_token_staked = PGMaterializedView(
                schema="public",
                signature="token_staked",
                definition="SELECT u.box_id,\n    u.height,\n    ((u.assets -> tid.token_id))::bigint AS amount,\n    ((u.assets -> tid.proxy_address))::integer AS proxy,\n    (u.registers -> 'R4'::text) AS penalty,\n    regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n    t.decimals,\n    t.token_id\n   FROM ((utxos u\n     JOIN token_config tid ON ((tid.stake_tree = u.ergo_tree)))\n     JOIN tokens t ON (((t.token_id)::text = tid.token_id)))",
                with_data=True
            )

    op.create_entity(public_token_staked)

    public_token_free = PGMaterializedView(
                schema="public",
                signature="token_free",
                definition='SELECT a.address,\n    ((a.amount)::double precision / power((10)::double precision, (t.decimals)::double precision)) AS amount\n   FROM ((assets a\n     JOIN token_config tid ON ((tid.token_id = (a.token_id)::text)))\n     JOIN tokens t ON (((t.token_id)::text = (a.token_id)::text)))',
                with_data=True
            )

    op.create_entity(public_token_free)

    public_token_config = PGMaterializedView(
                schema="public",
                signature="token_config",
                definition="SELECT 'paideia'::text AS token_name,\n    '1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489'::text AS token_id,\n    '245957934c20285ada547aa8f2c8e6f7637be86a1985b3e4c36e4e1ad8ce97ab'::text AS proxy_address,\n    '101f040004000e2012bbef36eaa5e61b64d519196a1e8ebea360f18aba9b02d2a21b16f26208960f040204000400040001000e20b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f0910402040004000402040204000400050204020402040604000100040404020402010001010100040201000100d807d601b2a4730000d6028cb2db6308720173010001d6039372027302d604e4c6a70411d605e4c6a7050ed60695ef7203ed93c5b2a4730300c5a78fb2e4c6b2a57304000411730500b2e4c6720104117306007307d6079372027308d1ecec957203d80ad608b2a5dc0c1aa402a7730900d609e4c672080411d60adb63087208d60bb2720a730a00d60cdb6308a7d60db2720c730b00d60eb2720a730c00d60fb2720c730d00d6107e8c720f0206d611e4c6720104119683090193c17208c1a793c27208c2a793b27209730e009ab27204730f00731093e4c67208050e720593b27209731100b27204731200938c720b018c720d01938c720b028c720d02938c720e018c720f01937e8c720e02069a72109d9c7eb272117313000672107eb27211731400067315957206d801d608b2a5731600ed72079593c27208c2a7d801d609c67208050e95e67209ed93e472097205938cb2db6308b2a57317007318000172057319731a731b9595efec7206720393c5b2a4731c00c5a7731d7207731e'::text AS stake_tree",
                with_data=True
            )

    op.create_entity(public_token_config)

    public_v_vesting = PGView(
        schema="public",
        signature="v_vesting",
        definition='WITH v AS (\n         SELECT utxos.id,\n            utxos.ergo_tree,\n            utxos.box_id,\n            (utxos.registers -> \'R4\'::text) AS parameters,\n            "right"((utxos.registers -> \'R5\'::text), (length((utxos.registers -> \'R5\'::text)) - 4)) AS vesting_key_id,\n            ((each(utxos.assets)).key)::character varying(64) AS token_id,\n            (each(utxos.assets)).value AS remaining\n           FROM utxos\n          WHERE (utxos.ergo_tree = ANY (ARRAY[\'100e04020400040404000402040604000402040204000400040404000400d810d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605e4c6a70411d6069d99db6903db6503feb27205730200b27205730300d607b27205730400d608b27205730500d6099972087204d60a9592720672079972087209999d9c7206720872077209d60b937204720ad60c95720bb2a5730600b2a5730700d60ddb6308720cd60eb2720d730800d60f8c720301d610b2a5730900d1eded96830201aedb63087201d901114d0e938c721101720293c5b2a4730a00c5a79683050193c2720cc2720193b1720d730b938cb2720d730c00017202938c720e01720f938c720e02720aec720bd801d611b2db63087210730d009683060193c17210c1a793c27210c2a7938c721101720f938c721102997204720a93e4c67210050e720293e4c6721004117205\'::text, \'1012040204000404040004020406040c0408040a050004000402040204000400040404000400d812d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605db6903db6503fed606e4c6a70411d6079d997205b27206730200b27206730300d608b27206730400d609b27206730500d60a9972097204d60b95917205b272067306009d9c7209b27206730700b272067308007309d60c959272077208997209720a999a9d9c7207997209720b7208720b720ad60d937204720cd60e95720db2a5730a00b2a5730b00d60fdb6308720ed610b2720f730c00d6118c720301d612b2a5730d00d1eded96830201aedb63087201d901134d0e938c721301720293c5b2a4730e00c5a79683050193c2720ec2720193b1720f730f938cb2720f731000017202938c7210017211938c721002720cec720dd801d613b2db630872127311009683060193c17212c1a793c27212c2a7938c7213017211938c721302997204720c93e4c67212050e720293e4c6721204117206\'::text, \'10070400040204000500040004000400d80bd601e4c6a7040ed602b2db6308a7730000d6038c720201d604e4c6a70805d605e4c6a70705d606e4c6a70505d607e4c6a70605d6089c9d99db6903db6503fe720572067207d6098c720202d60a9972047209d60b958f99720472087207997204720a997208720ad1ed93b0b5a5d9010c63ededed93c2720c720193e4c6720c040ee4c6a7090e93b1db6308720c7301938cb2db6308720c7302000172037303d9010c41639a8c720c018cb2db63088c720c0273040002720bec937209720baea5d9010c63ededededededededed93c1720cc1a793c2720cc2a7938cb2db6308720c730500017203938cb2db6308720c73060002997209720b93e4c6720c040e720193e4c6720c0505720693e4c6720c0605720793e4c6720c0705720593e4c6720c0805720493e4c6720c090ee4c6a7090e\'::text, \'100e04020400040404000402040604000402040204000400040404000400d810d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605e4c6a70411d6069d99db6903db6503feb27205730200b27205730300d607b27205730400d608b27205730500d6099972087204d60a9592720672079972087209999d9c7206720872077209d60b937204720ad60c95720bb2a5730600b2a5730700d60ddb6308720cd60eb2720d730800d60f8c720301d610b2a5730900d1eded96830201aedb63087201d901114d0e938c721101720293c5b2a4730a00c5a79683050193c2720cc2720193b1720d730b938cb2720d730c00017202938c720e01720f938c720e02720aec720bd801d611b2db63087210730d009683060193c17210c1a793c27210c2a7938c721101720f938c721102997204720a93e4c67210050e720293e4c6721004117205\'::text]))\n        ), a AS (\n         SELECT utxos.address,\n            ((each(utxos.assets)).key)::character varying(64) AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount\n           FROM utxos\n          WHERE ((utxos.address)::text <> \'\'::text)\n        )\n SELECT v.box_id,\n    (v.vesting_key_id)::character varying(64) AS vesting_key_id,\n    (v.parameters)::character varying(1024) AS parameters,\n    v.token_id,\n    (v.remaining)::bigint AS remaining,\n    a.address,\n    v.ergo_tree\n   FROM (v\n     JOIN a ON (((a.token_id)::text = v.vesting_key_id)))'
    )
    op.create_entity(public_v_vesting)

    public_v_unspent_by_token = PGView(
        schema="public",
        signature="v_unspent_by_token",
        definition='SELECT DISTINCT (each(utxos.assets)).key AS token_id,\n    utxos.box_id\n   FROM utxos'
    )
    op.create_entity(public_v_unspent_by_token)

    public_v_tokenomics_paideia = PGView(
        schema="public",
        signature="v_tokenomics_paideia",
        definition='WITH assets AS (\n         SELECT (each(utxos.assets)).key AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount,\n            utxos.ergo_tree\n           FROM utxos\n        ), vested AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'100e04020400040404000402040604000402040204000400040404000400d810d601b2a4730000d602e4c6a7050ed603b2db6308a7730100d6048c720302d605e4c6a70411d6069d99db6903db6503feb27205730200b27205730300d607b27205730400d608b27205730500d6099972087204d60a9592720672079972087209999d9c7206720872077209d60b937204720ad60c95720bb2a5730600b2a5730700d60ddb6308720cd60eb2720d730800d60f8c720301d610b2a5730900d1eded96830201aedb63087201d901114d0e938c721101720293c5b2a4730a00c5a79683050193c2720cc2720193b1720d730b938cb2720d730c00017202938c720e01720f938c720e02720aec720bd801d611b2db63087210730d009683060193c17210c1a793c27210c2a7938c721101720f938c721102997204720a93e4c67210050e720293e4c6721004117205\'::text) AND (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text))\n        ), emitted AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.ergo_tree = \'102d04000e201fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad48904000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504040404040604020400040204040402050004020400040004020402040404040400040004000402040004000e201028de73d018f0c9a374b71555c5b8f1390994f2f41633e7b9d68f77735782ee040004020100040604000500040204000400040204020400040204020404040404060100d802d601b2a4730000d602730195ed938cb2db6308720173020001730393c5b2a4730400c5a7d80ad603b2a5730500d604e4c672030411d605e4c672010411d606b27204730600d607b2a4730700d608b2e4c672070411730800d609db6308a7d60a9a8cb2db63087207730900029592b17209730a8cb27209730b0002730cd60bdb63087203d60cb2720b730d00d19683080193c27203c2a793b27204730e00b27205730f0093b27204731000b2720573110093b27204731200b27205731300937206958f7208720a7208720a938cb2720b731400018cb2720973150001938c720c017202938c720c0272069593c57201c5a7d80ad603b2a5731600d604db63087203d605db6308a7d6068cb2720573170002d607b5a4d9010763d801d609db630872079591b172097318ed938cb2720973190001731a93b2e4c672070411731b00b2e4c6a70411731c00731dd608e4c6a70411d609b27208731e00d60ab27208731f00d60bb072077320d9010b41639a8c720b019d9c8cb2db63088c720b02732100027209720ad60ce4c672030411d19683070193c27203c2a7938cb27204732200018cb272057323000195907206720b93b172047324d801d60db27204732500ed938c720d017202928c720d02997206720b93b2720c732600720a93b2720c732700b2720873280093b2720c73290099b27208732a007eb172070593b2720c732b007209d1732c\'::text)\n        ), staked AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'101f040004000e2012bbef36eaa5e61b64d519196a1e8ebea360f18aba9b02d2a21b16f26208960f040204000400040001000e20b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f0910402040004000402040204000400050204020402040604000100040404020402010001010100040201000100d807d601b2a4730000d6028cb2db6308720173010001d6039372027302d604e4c6a70411d605e4c6a7050ed60695ef7203ed93c5b2a4730300c5a78fb2e4c6b2a57304000411730500b2e4c6720104117306007307d6079372027308d1ecec957203d80ad608b2a5dc0c1aa402a7730900d609e4c672080411d60adb63087208d60bb2720a730a00d60cdb6308a7d60db2720c730b00d60eb2720a730c00d60fb2720c730d00d6107e8c720f0206d611e4c6720104119683090193c17208c1a793c27208c2a793b27209730e009ab27204730f00731093e4c67208050e720593b27209731100b27204731200938c720b018c720d01938c720b028c720d02938c720e018c720f01937e8c720e02069a72109d9c7eb272117313000672107eb27211731400067315957206d801d608b2a5731600ed72079593c27208c2a7d801d609c67208050e95e67209ed93e472097205938cb2db6308b2a57317007318000172057319731a731b9595efec7206720393c5b2a4731c00c5a7731d7207731e\'::text) AND (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text))\n        ), stake_pool AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'1014040004000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402040204040404040205000400040004000402040204000400040004000100d801d601b2a473000095ed938cb2db6308720173010001730293c5b2a4730300c5a7d808d602b2a5730400d603db63087202d604db6308a7d605b27204730500d606db6308b2a4730600d6079592b1720673078cb27206730800027309d6089a8c7205027207d609b2e4c6a70411730a00d19683050193c27202c2a7938cb27203730b00018cb27204730c0001959172087209d801d60ab27203730d00ed938c720a018c720501938c720a02997208720993b17203730e93b2e4c672020411730f00720993b2e4c6b2a57310000411731100999ab2e4c67201041173120072097207d17313\'::text) AND (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text))\n        ), supply AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.token_id = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text)\n          GROUP BY assets.token_id\n        ), vals AS (\n         SELECT ( SELECT COALESCE(vested.amount, (0)::numeric) AS "coalesce"\n                   FROM vested) AS vested,\n            ( SELECT COALESCE(staked.amount, (0)::numeric) AS "coalesce"\n                   FROM staked) AS staked,\n            ( SELECT COALESCE(emitted.amount, (0)::numeric) AS "coalesce"\n                   FROM emitted) AS emitted,\n            ( SELECT COALESCE(stake_pool.amount, (0)::numeric) AS "coalesce"\n                   FROM stake_pool) AS stake_pool,\n            ( SELECT COALESCE(supply.amount, (0)::numeric) AS "coalesce"\n                   FROM supply) AS supply\n        )\n SELECT \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text AS token_id,\n    t.decimals,\n    t.token_price,\n    v.vested,\n    v.staked,\n    v.emitted,\n    v.stake_pool,\n    v.supply,\n    (((v.supply - v.vested) - v.emitted) - v.stake_pool) AS in_circulation,\n    (((v.vested)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS vested_actual,\n    (((v.staked)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS staked_actual,\n    (((v.emitted)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS emitted_actual,\n    (((v.stake_pool)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS stake_pool_actual,\n    (((v.supply)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS supply_actual,\n    (((((v.supply - v.vested) - v.emitted) - v.stake_pool) / (t.decimals)::numeric))::numeric(32,2) AS in_circulation_actual\n   FROM (vals v\n     JOIN tokens t ON (((t.token_id)::text = \'1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489\'::text)))'
    )
    op.create_entity(public_v_tokenomics_paideia)

    public_v_tokenomics_neta = PGView(
        schema="public",
        signature="v_tokenomics_neta",
        definition='WITH assets AS (\n         SELECT (each(utxos.assets)).key AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount,\n            utxos.ergo_tree\n           FROM utxos\n        ), vested AS (\n         SELECT 0 AS amount\n        ), emitted AS (\n         SELECT 0 AS amount\n        ), staked AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = \'101b0400040004020e209e5e5e0a3abbaeaf0e54e1e2ca4a6a96c9b7151dd6d7ddaf738be2f99a54dc2b04020e203f38af5d8ce0549390feb2e1a0cd614c865d7578425683bcdb0101630e1a66d4040204000400040204000400050204020402040604000100040004000400040401000402040201010100d809d601b2a4730000d6028cb2db6308720173010001d603e4c6a70411d604e4c6a7050ed605db6308a7d606b27205730200d6077e8c72060206d6089372027303d60993c5b2a4730400c5a7d1ecec959372027305d807d60ab2a5dc0c1aa402a7730600d60be4c6720a0411d60cdb6308720ad60db2720c730700d60eb27205730800d60fb2720c730900d610e4c6720104119683090193c1720ac1a793c2720ac2a793b2720b730a009ab27203730b00730c93b2720b730d00b27203730e0093e4c6720a050e7204938c720d018c720e01938c720d028c720e02938c720f018c720601937e8c720f02069a72079d9c7eb27210730f000672077eb272107310000673119596830301720872098fb2e4c6b2a57312000411731300b2e4c672010411731400d801d60ab2a57315009593c2720ac2a7d801d60bc6720a050e9683020195e6720b93e4720b72047316938cb2db6308b2a57317007318000172047319731a9683020172087209\'::text) AND (assets.token_id = \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text))\n        ), stake_pool AS (\n         SELECT 0 AS amount\n        ), supply AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.token_id = \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text)\n          GROUP BY assets.token_id\n        ), vals AS (\n         SELECT ( SELECT COALESCE(vested.amount, 0) AS "coalesce"\n                   FROM vested) AS vested,\n            ( SELECT COALESCE(staked.amount, (0)::numeric) AS "coalesce"\n                   FROM staked) AS staked,\n            ( SELECT COALESCE(emitted.amount, 0) AS "coalesce"\n                   FROM emitted) AS emitted,\n            ( SELECT COALESCE(stake_pool.amount, 0) AS "coalesce"\n                   FROM stake_pool) AS stake_pool,\n            ( SELECT COALESCE(supply.amount, (0)::numeric) AS "coalesce"\n                   FROM supply) AS supply\n        )\n SELECT \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text AS token_id,\n    t.decimals,\n    t.token_price,\n    v.vested,\n    v.staked,\n    v.emitted,\n    v.stake_pool,\n    v.supply,\n    (((v.supply - (v.vested)::numeric) - (v.emitted)::numeric) - (v.stake_pool)::numeric) AS in_circulation,\n    (((v.vested)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS vested_actual,\n    (((v.staked)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS staked_actual,\n    (((v.emitted)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS emitted_actual,\n    (((v.stake_pool)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS stake_pool_actual,\n    (((v.supply)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS supply_actual,\n    (((((v.supply - (v.vested)::numeric) - (v.emitted)::numeric) - (v.stake_pool)::numeric) / (t.decimals)::numeric))::numeric(32,2) AS in_circulation_actual\n   FROM (vals v\n     JOIN tokens t ON (((t.token_id)::text = \'472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8\'::text)))'
    )
    op.create_entity(public_v_tokenomics_neta)

    public_v_tokenomics_ergopad = PGView(
        schema="public",
        signature="v_tokenomics_ergopad",
        definition="WITH assets AS (\n         SELECT (each(utxos.assets)).key AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount,\n            utxos.ergo_tree\n           FROM utxos\n        ), vested AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.ergo_tree = '10070400040204000500040004000400d80bd601e4c6a7040ed602b2db6308a7730000d6038c720201d604e4c6a70805d605e4c6a70705d606e4c6a70505d607e4c6a70605d6089c9d99db6903db6503fe720572067207d6098c720202d60a9972047209d60b958f99720472087207997204720a997208720ad1ed93b0b5a5d9010c63ededed93c2720c720193e4c6720c040ee4c6a7090e93b1db6308720c7301938cb2db6308720c7302000172037303d9010c41639a8c720c018cb2db63088c720c0273040002720bec937209720baea5d9010c63ededededededededed93c1720cc1a793c2720cc2a7938cb2db6308720c730500017203938cb2db6308720c73060002997209720b93e4c6720c040e720193e4c6720c0505720693e4c6720c0605720793e4c6720c0705720593e4c6720c0805720493e4c6720c090ee4c6a7090e'::text)\n        ), emitted AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.ergo_tree = '102d04000e20d71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de41304000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504040404040604020400040204040402050004020400040004020402040404040400040004000402040004000e201028de73d018f0c9a374b71555c5b8f1390994f2f41633e7b9d68f77735782ee040004020100040604000500040204000400040204020400040204020404040404060100d802d601b2a4730000d602730195ed938cb2db6308720173020001730393c5b2a4730400c5a7d80ad603b2a5730500d604e4c672030411d605e4c672010411d606b27204730600d607b2a4730700d608b2e4c672070411730800d609db6308a7d60a9a8cb2db63087207730900029592b17209730a8cb27209730b0002730cd60bdb63087203d60cb2720b730d00d19683080193c27203c2a793b27204730e00b27205730f0093b27204731000b2720573110093b27204731200b27205731300937206958f7208720a7208720a938cb2720b731400018cb2720973150001938c720c017202938c720c0272069593c57201c5a7d80ad603b2a5731600d604db63087203d605db6308a7d6068cb2720573170002d607b5a4d9010763d801d609db630872079591b172097318ed938cb2720973190001731a93b2e4c672070411731b00b2e4c6a70411731c00731dd608e4c6a70411d609b27208731e00d60ab27208731f00d60bb072077320d9010b41639a8c720b019d9c8cb2db63088c720b02732100027209720ad60ce4c672030411d19683070193c27203c2a7938cb27204732200018cb272057323000195907206720b93b172047324d801d60db27204732500ed938c720d017202928c720d02997206720b93b2720c732600720a93b2720c732700b2720873280093b2720c73290099b27208732a007eb172070593b2720c732b007209d1732c'::text)\n        ), staked AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = '1017040004000e200549ea3374a36b7a22a803766af732e61798463c3332c5f6d86c8ab9195eed59040204000400040204020400040005020402040204060400040204040e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402010001010100d802d601b2a4730000d6028cb2db6308720173010001959372027302d80bd603b2a5dc0c1aa402a7730300d604e4c672030411d605e4c6a70411d606db63087203d607b27206730400d608db6308a7d609b27208730500d60ab27206730600d60bb27208730700d60c8c720b02d60de4c672010411d19683090193c17203c1a793c27203c2a793b272047308009ab27205730900730a93e4c67203050ee4c6a7050e93b27204730b00b27205730c00938c7207018c720901938c7207028c720902938c720a018c720b01938c720a029a720c9d9cb2720d730d00720cb2720d730e00d801d603b2a4730f009593c57203c5a7d801d604b2a5731000d1ed93720273119593c27204c2a7d801d605c67204050e95e67205ed93e47205e4c6a7050e938cb2db6308b2a573120073130001e4c67203050e73147315d17316'::text) AND (assets.token_id = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text))\n        ), stake_pool AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE ((assets.ergo_tree = '1014040004000e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402040204040404040205000400040004000402040204000400040004000100d801d601b2a473000095ed938cb2db6308720173010001730293c5b2a4730300c5a7d808d602b2a5730400d603db63087202d604db6308a7d605b27204730500d606db6308b2a4730600d6079592b1720673078cb27206730800027309d6089a8c7205027207d609b2e4c6a70411730a00d19683050193c27202c2a7938cb27203730b00018cb27204730c0001959172087209d801d60ab27203730d00ed938c720a018c720501938c720a02997208720993b17203730e93b2e4c672020411730f00720993b2e4c6b2a57310000411731100999ab2e4c67201041173120072097207d17313'::text) AND (assets.token_id = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text))\n        ), supply AS (\n         SELECT sum(COALESCE(assets.amount, (0)::bigint)) AS amount\n           FROM assets\n          WHERE (assets.token_id = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text)\n          GROUP BY assets.token_id\n        ), vals AS (\n         SELECT ( SELECT vested.amount\n                   FROM vested) AS vested,\n            ( SELECT staked.amount\n                   FROM staked) AS staked,\n            ( SELECT emitted.amount\n                   FROM emitted) AS emitted,\n            ( SELECT stake_pool.amount\n                   FROM stake_pool) AS stake_pool,\n            ( SELECT supply.amount\n                   FROM supply) AS supply\n        )\n SELECT 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text AS token_id,\n    t.decimals,\n    t.token_price,\n    COALESCE(v.vested, 0.0) AS vested,\n    v.staked,\n    v.emitted,\n    v.stake_pool,\n    v.supply,\n    (((v.supply - COALESCE(v.vested, 0.0)) - v.emitted) - v.stake_pool) AS in_circulation,\n    (((COALESCE(v.vested, 0.0))::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS vested_actual,\n    (((v.staked)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS staked_actual,\n    (((v.emitted)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS emitted_actual,\n    (((v.stake_pool)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS stake_pool_actual,\n    (((v.supply)::double precision / power((10)::double precision, (t.decimals)::double precision)))::numeric(32,2) AS supply_actual,\n    (((((v.supply - COALESCE(v.vested, 0.0)) - v.emitted) - v.stake_pool) / (t.decimals)::numeric))::numeric(32,2) AS in_circulation_actual\n   FROM (vals v\n     JOIN tokens t ON (((t.token_id)::text = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text)))"
    )
    op.create_entity(public_v_tokenomics_ergopad)

    public_v_token_staked = PGView(
        schema="public",
        signature="v_token_staked",
        definition="SELECT u.box_id,\n    u.height,\n    ((u.assets -> tid.token_id))::bigint AS amount,\n    ((u.assets -> tid.proxy_address))::integer AS proxy,\n    (u.registers -> 'R4'::text) AS penalty,\n    regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n    t.decimals,\n    t.token_id\n   FROM ((utxos u\n     JOIN v_token_config tid ON ((tid.stake_tree = u.ergo_tree)))\n     JOIN tokens t ON (((t.token_id)::text = tid.token_id)))"
    )
    op.create_entity(public_v_token_staked)

    public_v_token_status = PGView(
        schema="public",
        signature="v_token_status",
        definition="WITH paideia_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? 'b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f091'::text)\n         LIMIT 1\n        ), paideia_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '93cda90b4fe24f075d7961fa0d1d662fdc7e1349d313059b9618eecb16c5eade'::text)\n         LIMIT 1\n        ), ergopad_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '05cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f3125'::text)\n         LIMIT 1\n        ), ergopad_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '0d01f2f0b3254b4a1731e1b61ad77641fe54de2bd68d1c6fc1ae4e7e9ddfb212'::text)\n         LIMIT 1\n        ), egio_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? 'f419099a27aaa5f6f7d109d8773b1862e8d1857b44aa7d86395940d41eb53806'::text)\n         LIMIT 1\n        ), egio_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '07a8648d0de0f7c87aad41a1fbc6d393a6ad95584d38c47c88125bef101c29e9'::text)\n         LIMIT 1\n        ), egiov2_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '097fd281c99588269d672e1b686bf6bcdce04102e183b2242f6634d93869fc0a'::text)\n         LIMIT 1\n        ), egiov2_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? 'dc22db903e5ac54da5d4b6f33dd13b2330b79a9ae473f9dd3ea0d796c1179443'::text)\n         LIMIT 1\n        ), neta_st AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '9e5e5e0a3abbaeaf0e54e1e2ca4a6a96c9b7151dd6d7ddaf738be2f99a54dc2b'::text)\n         LIMIT 1\n        ), neta_pl AS (\n         SELECT (utxos.registers -> 'R4'::text) AS r4\n           FROM utxos\n          WHERE (utxos.assets ? '8a4f19b27efeaa328e9ba03f0752253713e6b477cdb9ea7d5e8857e671c48e60'::text)\n         LIMIT 1\n        )\n SELECT 'paideia'::text AS token_name,\n    paideia_st.r4 AS str4,\n    paideia_pl.r4 AS plr4,\n    4 AS dcml\n   FROM paideia_st,\n    paideia_pl\nUNION\n SELECT 'ergopad'::text AS token_name,\n    ergopad_st.r4 AS str4,\n    ergopad_pl.r4 AS plr4,\n    2 AS dcml\n   FROM ergopad_st,\n    ergopad_pl\nUNION\n SELECT 'egio'::text AS token_name,\n    egio_st.r4 AS str4,\n    egio_pl.r4 AS plr4,\n    4 AS dcml\n   FROM egio_st,\n    egio_pl\nUNION\n SELECT 'egiov2'::text AS token_name,\n    egiov2_st.r4 AS str4,\n    egiov2_pl.r4 AS plr4,\n    4 AS dcml\n   FROM egiov2_st,\n    egiov2_pl\nUNION\n SELECT 'neta'::text AS token_name,\n    neta_st.r4 AS str4,\n    neta_pl.r4 AS plr4,\n    6 AS dcml\n   FROM neta_st,\n    neta_pl"
    )
    op.create_entity(public_v_token_status)

    public_v_token_locked = PGView(
        schema="public",
        signature="v_token_locked",
        definition="WITH adr AS (\n         SELECT u_1.address,\n            u_1.id,\n            ((each(u_1.assets)).key)::character varying(64) AS token_id,\n            ((each(u_1.assets)).value)::bigint AS amount\n           FROM utxos u_1\n          WHERE ((u_1.address)::text <> ''::text)\n        )\n SELECT adr.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty\n   FROM (v_token_staked u\n     JOIN adr ON (((adr.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)"
    )
    op.create_entity(public_v_token_locked)

    public_v_staking = PGView(
        schema="public",
        signature="v_staking",
        definition="WITH ergopad AS (\n         SELECT 'ergopad'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text))::bigint AS amount,\n            ((u.assets -> '1028de73d018f0c9a374b71555c5b8f1390994f2f41633e7b9d68f77735782ee'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = 'd71693c49a84fbbecd4908c94813b46514b18b67a99952dc1e6e4791556de413'::text)))\n          WHERE (u.ergo_tree = '1017040004000e200549ea3374a36b7a22a803766af732e61798463c3332c5f6d86c8ab9195eed59040204000400040204020400040005020402040204060400040204040e2005cde13424a7972fbcd0b43fccbb5e501b1f75302175178fc86d8f243f3f312504020402010001010100d802d601b2a4730000d6028cb2db6308720173010001959372027302d80bd603b2a5dc0c1aa402a7730300d604e4c672030411d605e4c6a70411d606db63087203d607b27206730400d608db6308a7d609b27208730500d60ab27206730600d60bb27208730700d60c8c720b02d60de4c672010411d19683090193c17203c1a793c27203c2a793b272047308009ab27205730900730a93e4c67203050ee4c6a7050e93b27204730b00b27205730c00938c7207018c720901938c7207028c720902938c720a018c720b01938c720a029a720c9d9cb2720d730d00720cb2720d730e00d801d603b2a4730f009593c57203c5a7d801d604b2a5731000d1ed93720273119593c27204c2a7d801d605c67204050e95e67205ed93e47205e4c6a7050e938cb2db6308b2a573120073130001e4c67203050e73147315d17316'::text)\n        ), paideia AS (\n         SELECT 'paideia'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489'::text))::bigint AS amount,\n            ((u.assets -> '245957934c20285ada547aa8f2c8e6f7637be86a1985b3e4c36e4e1ad8ce97ab'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489'::text)))\n          WHERE (u.ergo_tree = '101f040004000e2012bbef36eaa5e61b64d519196a1e8ebea360f18aba9b02d2a21b16f26208960f040204000400040001000e20b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f0910402040004000402040204000400050204020402040604000100040404020402010001010100040201000100d807d601b2a4730000d6028cb2db6308720173010001d6039372027302d604e4c6a70411d605e4c6a7050ed60695ef7203ed93c5b2a4730300c5a78fb2e4c6b2a57304000411730500b2e4c6720104117306007307d6079372027308d1ecec957203d80ad608b2a5dc0c1aa402a7730900d609e4c672080411d60adb63087208d60bb2720a730a00d60cdb6308a7d60db2720c730b00d60eb2720a730c00d60fb2720c730d00d6107e8c720f0206d611e4c6720104119683090193c17208c1a793c27208c2a793b27209730e009ab27204730f00731093e4c67208050e720593b27209731100b27204731200938c720b018c720d01938c720b028c720d02938c720e018c720f01937e8c720e02069a72109d9c7eb272117313000672107eb27211731400067315957206d801d608b2a5731600ed72079593c27208c2a7d801d609c67208050e95e67209ed93e472097205938cb2db6308b2a57317007318000172057319731a731b9595efec7206720393c5b2a4731c00c5a7731d7207731e'::text)\n        ), egio AS (\n         SELECT 'egio'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text))::bigint AS amount,\n            ((u.assets -> '012d649686deeef606d253146bec0cf623f9b84574fbfa0fd0d1091393923613'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text)))\n          WHERE (u.ergo_tree = '1017040004000e20a8d633dee705ff90e3181013381455353dac2d91366952209ac6b3f9cdcc23e9040204000400040204020400040005020402040204060400040204040e20f419099a27aaa5f6f7d109d8773b1862e8d1857b44aa7d86395940d41eb5380604020402010001010100d802d601b2a4730000d6028cb2db6308720173010001959372027302d80bd603b2a5dc0c1aa402a7730300d604e4c672030411d605e4c6a70411d606db63087203d607b27206730400d608db6308a7d609b27208730500d60ab27206730600d60bb27208730700d60c8c720b02d60de4c672010411d19683090193c17203c1a793c27203c2a793b272047308009ab27205730900730a93e4c67203050ee4c6a7050e93b27204730b00b27205730c00938c7207018c720901938c7207028c720902938c720a018c720b01938c720a029a720c9d9cb2720d730d00720cb2720d730e00d801d603b2a4730f009593c57203c5a7d801d604b2a5731000d1ed93720273119593c27204c2a7d801d605c67204050e95e67205ed93e47205e4c6a7050e938cb2db6308b2a573120073130001e4c67203050e73147315d17316'::text)\n        ), egiov2 AS (\n         SELECT 'egiov2'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text))::bigint AS amount,\n            ((u.assets -> '012d649686deeef606d253146bec0cf623f9b84574fbfa0fd0d1091393923613'::text))::integer AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '00b1e236b60b95c2c6f8007a9d89bc460fc9e78f98b09faec9449007b40bccf3'::text)))\n          WHERE (u.ergo_tree = '101b0400040004020e20097fd281c99588269d672e1b686bf6bcdce04102e183b2242f6634d93869fc0a04020e200e4202196f6030ab1986e39012dc95ea10f034b13d90a70c0b1f86d986106ff6040204000400040204000400050204020402040604000100040004000400040401000402040201010100d809d601b2a4730000d6028cb2db6308720173010001d603e4c6a70411d604e4c6a7050ed605db6308a7d606b27205730200d6077e8c72060206d6089372027303d60993c5b2a4730400c5a7d1ecec959372027305d807d60ab2a5dc0c1aa402a7730600d60be4c6720a0411d60cdb6308720ad60db2720c730700d60eb27205730800d60fb2720c730900d610e4c6720104119683090193c1720ac1a793c2720ac2a793b2720b730a009ab27203730b00730c93b2720b730d00b27203730e0093e4c6720a050e7204938c720d018c720e01938c720d028c720e02938c720f018c720601937e8c720f02069a72079d9c7eb27210730f000672077eb272107310000673119596830301720872098fb2e4c6b2a57312000411731300b2e4c672010411731400d801d60ab2a57315009593c2720ac2a7d801d60bc6720a050e9683020195e6720b93e4720b72047316938cb2db6308b2a57317007318000172047319731a9683020172087209'::text)\n        ), neta AS (\n         SELECT 'neta'::text AS project_name,\n            u.box_id,\n            u.height,\n            ((u.assets -> '472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8'::text))::bigint AS amount,\n            ((u.assets -> 'a94787d05eefbd1b773b62812123b91c40553bd5ed7f3092ae66dba3f812e0c0'::text))::bigint AS proxy,\n            (u.registers -> 'R4'::text) AS penalty,\n            regexp_replace((u.registers -> 'R5'::text), '^0e20'::text, ''::text) AS stakekey_token_id,\n            t.decimals,\n            t.token_id,\n            u.assets\n           FROM (utxos u\n             JOIN tokens t ON (((t.token_id)::text = '472c3d4ecaa08fb7392ff041ee2e6af75f4a558810a74b28600549d5392810e8'::text)))\n          WHERE (u.ergo_tree = '101b0400040004020e209e5e5e0a3abbaeaf0e54e1e2ca4a6a96c9b7151dd6d7ddaf738be2f99a54dc2b04020e203f38af5d8ce0549390feb2e1a0cd614c865d7578425683bcdb0101630e1a66d4040204000400040204000400050204020402040604000100040004000400040401000402040201010100d809d601b2a4730000d6028cb2db6308720173010001d603e4c6a70411d604e4c6a7050ed605db6308a7d606b27205730200d6077e8c72060206d6089372027303d60993c5b2a4730400c5a7d1ecec959372027305d807d60ab2a5dc0c1aa402a7730600d60be4c6720a0411d60cdb6308720ad60db2720c730700d60eb27205730800d60fb2720c730900d610e4c6720104119683090193c1720ac1a793c2720ac2a793b2720b730a009ab27203730b00730c93b2720b730d00b27203730e0093e4c6720a050e7204938c720d018c720e01938c720d028c720e02938c720f018c720601937e8c720f02069a72079d9c7eb27210730f000672077eb272107310000673119596830301720872098fb2e4c6b2a57312000411731300b2e4c672010411731400d801d60ab2a57315009593c2720ac2a7d801d60bc6720a050e9683020195e6720b93e4720b72047316938cb2db6308b2a57317007318000172047319731a9683020172087209'::text)\n        ), a AS (\n         SELECT utxos.address,\n            utxos.id,\n            ((each(utxos.assets)).key)::character varying(64) AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount\n           FROM utxos\n        )\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (ergopad u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (paideia u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (egio u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (egiov2 u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)\nUNION ALL\n SELECT a.address,\n    u.token_id,\n    u.box_id,\n    u.stakekey_token_id,\n    ((u.amount)::double precision / power((10)::double precision, (u.decimals)::double precision)) AS amount,\n    u.penalty,\n    u.project_name\n   FROM (neta u\n     JOIN a ON (((a.token_id)::text = u.stakekey_token_id)))\n  WHERE (u.proxy = 1)"
    )
    op.create_entity(public_v_staking)

    public_v_registers_by_token = PGView(
        schema="public",
        signature="v_registers_by_token",
        definition='WITH ep AS (\n         SELECT utxos.box_id,\n            skeys(utxos.assets) AS token_id\n           FROM utxos\n        )\n SELECT u.box_id,\n    ep.token_id,\n    (u.assets -> ep.token_id) AS amount,\n    hstore_to_json(u.registers) AS registers\n   FROM (utxos u\n     JOIN ep ON (((ep.box_id)::text = (u.box_id)::text)))'
    )
    op.create_entity(public_v_registers_by_token)

    public_v_balances = PGView(
        schema="public",
        signature="v_balances",
        definition="SELECT utxos.address,\n    sum(utxos.nergs) AS nergs\n   FROM utxos\n  WHERE ((utxos.address)::text <> ''::text)\n  GROUP BY utxos.address"
    )
    op.create_entity(public_v_balances)

    public_v_assets = PGView(
        schema="public",
        signature="v_assets",
        definition="WITH a AS (\n         SELECT utxos.address,\n            ((each(utxos.assets)).key)::character varying(64) AS token_id,\n            ((each(utxos.assets)).value)::bigint AS amount\n           FROM utxos\n          WHERE ((utxos.address)::text <> ''::text)\n        )\n SELECT a.address,\n    a.token_id,\n    sum(a.amount) AS amount\n   FROM a\n  GROUP BY a.address, a.token_id"
    )
    op.create_entity(public_v_assets)

    public_v_token_config = PGView(
        schema="public",
        signature="v_token_config",
        definition="SELECT 'paideia'::text AS token_name,\n    '1fd6e032e8476c4aa54c18c1a308dce83940e8f4a28f576440513ed7326ad489'::text AS token_id,\n    '245957934c20285ada547aa8f2c8e6f7637be86a1985b3e4c36e4e1ad8ce97ab'::text AS proxy_address,\n    '101f040004000e2012bbef36eaa5e61b64d519196a1e8ebea360f18aba9b02d2a21b16f26208960f040204000400040001000e20b682ad9e8c56c5a0ba7fe2d3d9b2fbd40af989e8870628f4a03ae1022d36f0910402040004000402040204000400050204020402040604000100040404020402010001010100040201000100d807d601b2a4730000d6028cb2db6308720173010001d6039372027302d604e4c6a70411d605e4c6a7050ed60695ef7203ed93c5b2a4730300c5a78fb2e4c6b2a57304000411730500b2e4c6720104117306007307d6079372027308d1ecec957203d80ad608b2a5dc0c1aa402a7730900d609e4c672080411d60adb63087208d60bb2720a730a00d60cdb6308a7d60db2720c730b00d60eb2720a730c00d60fb2720c730d00d6107e8c720f0206d611e4c6720104119683090193c17208c1a793c27208c2a793b27209730e009ab27204730f00731093e4c67208050e720593b27209731100b27204731200938c720b018c720d01938c720b028c720d02938c720e018c720f01937e8c720e02069a72109d9c7eb272117313000672107eb27211731400067315957206d801d608b2a5731600ed72079593c27208c2a7d801d609c67208050e95e67209ed93e472097205938cb2db6308b2a57317007318000172057319731a731b9595efec7206720393c5b2a4731c00c5a7731d7207731e'::text AS stake_tree"
    )
    op.create_entity(public_v_token_config)

    public_v_audit_stats = PGView(
        schema="public",
        signature="v_audit_stats",
        definition='WITH ss AS (\n         SELECT audit_log.created_at,\n            lag(audit_log.created_at) OVER (ORDER BY audit_log.created_at) AS prev,\n            audit_log.height,\n            audit_log.service\n           FROM audit_log\n        )\n SELECT max(ss.height) AS max_height,\n    avg((ss.created_at - ss.prev)) AS avg_block,\n    count(*) AS block_count,\n    ss.service\n   FROM ss\n  WHERE (ss.created_at IS NOT NULL)\n  GROUP BY ss.service'
    )
    op.create_entity(public_v_audit_stats)

    op.create_table('utxos',
    sa.Column('id', sa.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('box_id', sa.VARCHAR(length=64), autoincrement=False, nullable=False),
    sa.Column('ergo_tree', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('address', sa.VARCHAR(length=64), autoincrement=False, nullable=False),
    sa.Column('nergs', sa.BIGINT(), autoincrement=False, nullable=True),
    sa.Column('registers', postgresql.HSTORE(text_type=sa.Text()), autoincrement=False, nullable=True),
    sa.Column('assets', postgresql.HSTORE(text_type=sa.Text()), autoincrement=False, nullable=True),
    sa.Column('transaction_id', sa.VARCHAR(length=64), autoincrement=False, nullable=True),
    sa.Column('creation_height', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('height', sa.INTEGER(), autoincrement=False, nullable=False),
    sa.PrimaryKeyConstraint('id', name='utxos_pkey'),
    sa.UniqueConstraint('box_id', name='utxos_box_id_key')
    )
    op.create_index('uq_utxos_boxid', 'utxos', ['box_id'], unique=False)
    op.create_index('idx_utxos', 'utxos', ['box_id', 'ergo_tree', 'address', 'nergs', 'transaction_id', 'height'], unique=False)
    op.create_table('boxes',
    sa.Column('id', sa.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('box_id', sa.VARCHAR(length=64), autoincrement=False, nullable=False),
    sa.Column('height', sa.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('is_unspent', sa.BOOLEAN(), autoincrement=False, nullable=True),
    sa.Column('nerg', sa.BIGINT(), autoincrement=False, nullable=True),
    sa.PrimaryKeyConstraint('id', name='boxes_pkey')
    )
    op.create_table('checkpoint_utxos',
    sa.Column('index', sa.BIGINT(), autoincrement=False, nullable=True),
    sa.Column('box_id', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('ergo_tree', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('address', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('nergs', sa.BIGINT(), autoincrement=False, nullable=True),
    sa.Column('registers', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('assets', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('transaction_id', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('creation_height', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('height', sa.BIGINT(), autoincrement=False, nullable=True)
    )
    op.create_index('ix_checkpoint_utxos_index', 'checkpoint_utxos', ['index'], unique=False)
    op.create_table('prices',
    sa.Column('id', sa.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('token_id', sa.VARCHAR(length=64), autoincrement=False, nullable=False),
    sa.Column('price', sa.NUMERIC(precision=32, scale=10), autoincrement=False, nullable=False),
    sa.PrimaryKeyConstraint('id', name='prices_pkey')
    )
    op.create_table('tokens',
    sa.Column('id', sa.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('token_id', sa.VARCHAR(length=64), autoincrement=False, nullable=False),
    sa.Column('decimals', sa.BIGINT(), autoincrement=False, nullable=True),
    sa.Column('amount', sa.BIGINT(), autoincrement=False, nullable=True),
    sa.Column('token_name', sa.VARCHAR(length=1024), autoincrement=False, nullable=True),
    sa.Column('token_type', sa.VARCHAR(length=64), autoincrement=False, nullable=True),
    sa.Column('token_price', sa.NUMERIC(precision=32, scale=10), autoincrement=False, nullable=True),
    sa.Column('height', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.PrimaryKeyConstraint('id', name='tokens_pkey')
    )
    op.create_index('uq_tokens', 'tokens', ['token_id'], unique=False)
    op.create_table('checkpoint_boxes',
    sa.Column('index', sa.BIGINT(), autoincrement=False, nullable=True),
    sa.Column('box_id', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('height', sa.BIGINT(), autoincrement=False, nullable=True),
    sa.Column('nerg', sa.BIGINT(), autoincrement=False, nullable=True),
    sa.Column('is_unspent', sa.BOOLEAN(), autoincrement=False, nullable=True)
    )
    op.create_index('ix_checkpoint_boxes_index', 'checkpoint_boxes', ['index'], unique=False)
    op.create_table('checkpoint_tokens',
    sa.Column('index', sa.BIGINT(), autoincrement=False, nullable=True),
    sa.Column('token_id', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('height', sa.BIGINT(), autoincrement=False, nullable=True),
    sa.Column('amount', sa.BIGINT(), autoincrement=False, nullable=True),
    sa.Column('token_name', sa.TEXT(), autoincrement=False, nullable=True),
    sa.Column('decimals', sa.BIGINT(), autoincrement=False, nullable=True)
    )
    op.create_index('ix_checkpoint_tokens_index', 'checkpoint_tokens', ['index'], unique=False)
    op.create_table('audit_log',
    sa.Column('id', sa.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('height', sa.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', postgresql.TIMESTAMP(), server_default=sa.text('now()'), autoincrement=False, nullable=False),
    sa.Column('service', sa.VARCHAR(length=64), autoincrement=False, nullable=True),
    sa.Column('notes', sa.TEXT(), autoincrement=False, nullable=True),
    sa.PrimaryKeyConstraint('id', name='audit_log_pkey')
    )
    # ### end Alembic commands ###
